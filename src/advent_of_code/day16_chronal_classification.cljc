(ns advent-of-code.day16-chronal-classification
  (:require [clojure.string :as str]
            [clojure.set :refer [difference union]]
            [clojure.test :refer [is]]
            [ysera.test :refer [is= is-not]]
            [clojure.string :as str]
            [clojure.string :as str]))

(def input "Before: [0, 1, 2, 1]\n12 3 2 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [3, 3, 2, 2]\n1 0 2 2\nAfter:  [3, 3, 2, 2]\n\nBefore: [1, 1, 2, 1]\n2 0 2 1\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 1, 1, 3]\n13 3 1 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [2, 3, 2, 2]\n1 1 2 2\nAfter:  [2, 3, 2, 2]\n\nBefore: [2, 0, 2, 3]\n9 2 0 0\nAfter:  [4, 0, 2, 3]\n\nBefore: [3, 1, 1, 2]\n5 0 3 2\nAfter:  [3, 1, 2, 2]\n\nBefore: [1, 1, 2, 1]\n2 0 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [0, 3, 0, 0]\n10 3 2 0\nAfter:  [1, 3, 0, 0]\n\nBefore: [1, 1, 0, 2]\n10 2 2 0\nAfter:  [1, 1, 0, 2]\n\nBefore: [0, 2, 1, 2]\n7 0 0 0\nAfter:  [0, 2, 1, 2]\n\nBefore: [3, 0, 2, 1]\n12 3 2 1\nAfter:  [3, 1, 2, 1]\n\nBefore: [0, 3, 1, 2]\n4 2 3 0\nAfter:  [1, 3, 1, 2]\n\nBefore: [1, 1, 0, 1]\n6 1 3 3\nAfter:  [1, 1, 0, 1]\n\nBefore: [0, 1, 0, 3]\n3 3 3 1\nAfter:  [0, 3, 0, 3]\n\nBefore: [1, 1, 2, 0]\n11 1 0 1\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 1, 0, 3]\n15 0 2 3\nAfter:  [1, 1, 0, 0]\n\nBefore: [3, 1, 2, 1]\n6 1 3 2\nAfter:  [3, 1, 1, 1]\n\nBefore: [3, 3, 2, 3]\n1 1 2 0\nAfter:  [2, 3, 2, 3]\n\nBefore: [0, 1, 0, 1]\n6 1 3 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [3, 3, 2, 3]\n1 0 2 2\nAfter:  [3, 3, 2, 3]\n\nBefore: [1, 2, 1, 2]\n4 2 3 2\nAfter:  [1, 2, 1, 2]\n\nBefore: [3, 2, 1, 3]\n5 0 1 1\nAfter:  [3, 2, 1, 3]\n\nBefore: [3, 2, 1, 1]\n14 1 2 1\nAfter:  [3, 0, 1, 1]\n\nBefore: [1, 1, 0, 1]\n15 0 2 0\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 2, 3, 1]\n13 3 1 2\nAfter:  [3, 2, 0, 1]\n\nBefore: [1, 3, 0, 2]\n15 0 2 1\nAfter:  [1, 0, 0, 2]\n\nBefore: [0, 3, 0, 3]\n3 3 3 3\nAfter:  [0, 3, 0, 3]\n\nBefore: [0, 3, 2, 3]\n14 3 1 0\nAfter:  [1, 3, 2, 3]\n\nBefore: [0, 1, 3, 1]\n6 1 3 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 2, 2, 1]\n2 0 2 0\nAfter:  [0, 2, 2, 1]\n\nBefore: [1, 1, 0, 2]\n11 1 0 1\nAfter:  [1, 1, 0, 2]\n\nBefore: [0, 1, 2, 1]\n0 1 2 1\nAfter:  [0, 0, 2, 1]\n\nBefore: [1, 2, 2, 1]\n3 2 2 2\nAfter:  [1, 2, 2, 1]\n\nBefore: [1, 1, 0, 1]\n6 1 3 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [1, 3, 2, 2]\n1 1 2 0\nAfter:  [2, 3, 2, 2]\n\nBefore: [1, 2, 3, 3]\n8 1 3 3\nAfter:  [1, 2, 3, 2]\n\nBefore: [1, 1, 3, 2]\n11 1 0 3\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 0, 0, 2]\n7 0 0 1\nAfter:  [0, 0, 0, 2]\n\nBefore: [1, 1, 1, 2]\n11 1 0 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [2, 0, 0, 3]\n8 0 3 2\nAfter:  [2, 0, 2, 3]\n\nBefore: [1, 3, 2, 1]\n12 3 2 2\nAfter:  [1, 3, 1, 1]\n\nBefore: [2, 3, 2, 1]\n12 3 2 3\nAfter:  [2, 3, 2, 1]\n\nBefore: [2, 1, 3, 3]\n8 0 3 2\nAfter:  [2, 1, 2, 3]\n\nBefore: [2, 0, 2, 1]\n12 3 2 1\nAfter:  [2, 1, 2, 1]\n\nBefore: [2, 3, 3, 1]\n4 3 2 3\nAfter:  [2, 3, 3, 1]\n\nBefore: [2, 0, 2, 3]\n5 3 0 2\nAfter:  [2, 0, 2, 3]\n\nBefore: [0, 3, 2, 2]\n1 1 2 2\nAfter:  [0, 3, 2, 2]\n\nBefore: [0, 2, 2, 3]\n3 3 3 1\nAfter:  [0, 3, 2, 3]\n\nBefore: [1, 2, 1, 2]\n14 1 2 2\nAfter:  [1, 2, 0, 2]\n\nBefore: [1, 0, 3, 0]\n10 3 3 2\nAfter:  [1, 0, 1, 0]\n\nBefore: [2, 3, 2, 1]\n12 3 2 2\nAfter:  [2, 3, 1, 1]\n\nBefore: [1, 3, 1, 2]\n14 3 2 3\nAfter:  [1, 3, 1, 0]\n\nBefore: [0, 1, 2, 1]\n6 1 3 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [2, 1, 2, 1]\n6 1 3 3\nAfter:  [2, 1, 2, 1]\n\nBefore: [1, 2, 0, 1]\n13 3 1 3\nAfter:  [1, 2, 0, 0]\n\nBefore: [1, 1, 2, 2]\n11 1 0 1\nAfter:  [1, 1, 2, 2]\n\nBefore: [2, 2, 3, 1]\n4 3 2 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [1, 0, 3, 2]\n10 3 3 3\nAfter:  [1, 0, 3, 1]\n\nBefore: [2, 2, 0, 0]\n10 3 2 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [2, 1, 2, 1]\n6 1 3 1\nAfter:  [2, 1, 2, 1]\n\nBefore: [2, 1, 3, 1]\n6 1 3 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [0, 3, 2, 0]\n7 0 0 3\nAfter:  [0, 3, 2, 0]\n\nBefore: [3, 3, 0, 2]\n14 1 3 0\nAfter:  [0, 3, 0, 2]\n\nBefore: [2, 2, 2, 2]\n3 2 2 2\nAfter:  [2, 2, 2, 2]\n\nBefore: [2, 2, 1, 3]\n8 1 3 3\nAfter:  [2, 2, 1, 2]\n\nBefore: [1, 0, 0, 0]\n15 0 2 1\nAfter:  [1, 0, 0, 0]\n\nBefore: [1, 1, 2, 3]\n0 1 2 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [0, 1, 0, 1]\n7 0 0 1\nAfter:  [0, 0, 0, 1]\n\nBefore: [0, 1, 3, 3]\n13 2 1 0\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 1, 0, 0]\n10 3 3 3\nAfter:  [1, 1, 0, 1]\n\nBefore: [2, 1, 2, 3]\n5 3 0 1\nAfter:  [2, 2, 2, 3]\n\nBefore: [0, 1, 1, 3]\n3 3 3 1\nAfter:  [0, 3, 1, 3]\n\nBefore: [0, 2, 3, 2]\n10 3 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [1, 1, 3, 2]\n11 1 0 2\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 0, 2, 1]\n12 3 2 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [3, 3, 1, 2]\n14 3 2 1\nAfter:  [3, 0, 1, 2]\n\nBefore: [1, 1, 2, 1]\n11 1 0 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 1, 1, 2]\n4 2 3 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 2, 0, 3]\n15 0 2 0\nAfter:  [0, 2, 0, 3]\n\nBefore: [2, 1, 2, 3]\n5 3 0 2\nAfter:  [2, 1, 2, 3]\n\nBefore: [0, 0, 2, 3]\n7 0 0 2\nAfter:  [0, 0, 0, 3]\n\nBefore: [1, 2, 1, 3]\n8 1 3 3\nAfter:  [1, 2, 1, 2]\n\nBefore: [2, 2, 3, 2]\n10 3 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [3, 3, 2, 3]\n1 1 2 3\nAfter:  [3, 3, 2, 2]\n\nBefore: [0, 3, 0, 3]\n3 3 3 1\nAfter:  [0, 3, 0, 3]\n\nBefore: [0, 1, 1, 2]\n4 2 3 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [3, 1, 2, 1]\n12 3 2 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [2, 3, 2, 3]\n1 1 2 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [2, 1, 2, 3]\n8 0 3 0\nAfter:  [2, 1, 2, 3]\n\nBefore: [1, 3, 1, 3]\n8 2 3 2\nAfter:  [1, 3, 1, 3]\n\nBefore: [0, 0, 2, 1]\n7 0 0 3\nAfter:  [0, 0, 2, 0]\n\nBefore: [1, 1, 2, 3]\n11 1 0 1\nAfter:  [1, 1, 2, 3]\n\nBefore: [1, 1, 2, 2]\n11 1 0 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 0, 0, 3]\n10 2 2 3\nAfter:  [0, 0, 0, 1]\n\nBefore: [0, 1, 0, 0]\n10 2 2 2\nAfter:  [0, 1, 1, 0]\n\nBefore: [1, 1, 2, 2]\n2 0 2 0\nAfter:  [0, 1, 2, 2]\n\nBefore: [2, 1, 2, 3]\n0 1 2 1\nAfter:  [2, 0, 2, 3]\n\nBefore: [1, 3, 2, 3]\n1 3 2 2\nAfter:  [1, 3, 2, 3]\n\nBefore: [0, 1, 2, 1]\n0 1 2 0\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 0, 2, 2]\n2 0 2 0\nAfter:  [0, 0, 2, 2]\n\nBefore: [1, 1, 2, 0]\n0 1 2 1\nAfter:  [1, 0, 2, 0]\n\nBefore: [1, 1, 0, 3]\n8 0 3 1\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 3, 1, 3]\n8 2 3 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [3, 2, 2, 3]\n1 0 2 3\nAfter:  [3, 2, 2, 2]\n\nBefore: [2, 1, 0, 1]\n6 1 3 2\nAfter:  [2, 1, 1, 1]\n\nBefore: [2, 3, 2, 1]\n1 1 2 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [3, 0, 1, 2]\n4 2 3 2\nAfter:  [3, 0, 1, 2]\n\nBefore: [1, 1, 2, 3]\n2 0 2 1\nAfter:  [1, 0, 2, 3]\n\nBefore: [3, 2, 0, 3]\n3 3 3 2\nAfter:  [3, 2, 3, 3]\n\nBefore: [2, 3, 2, 0]\n3 2 2 1\nAfter:  [2, 2, 2, 0]\n\nBefore: [1, 1, 1, 0]\n9 2 0 2\nAfter:  [1, 1, 2, 0]\n\nBefore: [0, 1, 2, 2]\n0 1 2 0\nAfter:  [0, 1, 2, 2]\n\nBefore: [2, 1, 1, 2]\n14 3 2 0\nAfter:  [0, 1, 1, 2]\n\nBefore: [1, 2, 0, 3]\n15 0 2 2\nAfter:  [1, 2, 0, 3]\n\nBefore: [3, 2, 3, 3]\n8 1 3 3\nAfter:  [3, 2, 3, 2]\n\nBefore: [1, 2, 2, 2]\n2 0 2 3\nAfter:  [1, 2, 2, 0]\n\nBefore: [1, 1, 2, 3]\n1 3 2 1\nAfter:  [1, 2, 2, 3]\n\nBefore: [0, 1, 3, 1]\n13 2 1 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 2, 1, 2]\n4 2 3 0\nAfter:  [1, 2, 1, 2]\n\nBefore: [2, 2, 2, 3]\n1 3 2 1\nAfter:  [2, 2, 2, 3]\n\nBefore: [1, 2, 1, 3]\n8 0 3 3\nAfter:  [1, 2, 1, 1]\n\nBefore: [2, 3, 2, 0]\n1 1 2 0\nAfter:  [2, 3, 2, 0]\n\nBefore: [2, 0, 1, 3]\n8 0 3 1\nAfter:  [2, 2, 1, 3]\n\nBefore: [0, 3, 1, 1]\n7 0 0 0\nAfter:  [0, 3, 1, 1]\n\nBefore: [3, 2, 1, 3]\n8 1 3 3\nAfter:  [3, 2, 1, 2]\n\nBefore: [1, 1, 2, 0]\n11 1 0 2\nAfter:  [1, 1, 1, 0]\n\nBefore: [0, 0, 0, 3]\n7 0 0 0\nAfter:  [0, 0, 0, 3]\n\nBefore: [0, 1, 2, 3]\n1 3 2 0\nAfter:  [2, 1, 2, 3]\n\nBefore: [1, 2, 0, 0]\n10 3 3 1\nAfter:  [1, 1, 0, 0]\n\nBefore: [1, 3, 0, 1]\n15 0 2 0\nAfter:  [0, 3, 0, 1]\n\nBefore: [1, 1, 0, 1]\n11 1 0 3\nAfter:  [1, 1, 0, 1]\n\nBefore: [0, 0, 1, 2]\n4 2 3 1\nAfter:  [0, 1, 1, 2]\n\nBefore: [0, 1, 3, 1]\n4 3 2 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [3, 1, 3, 1]\n6 1 3 3\nAfter:  [3, 1, 3, 1]\n\nBefore: [2, 1, 2, 2]\n0 1 2 1\nAfter:  [2, 0, 2, 2]\n\nBefore: [3, 2, 1, 3]\n8 2 3 0\nAfter:  [1, 2, 1, 3]\n\nBefore: [0, 3, 2, 2]\n1 1 2 3\nAfter:  [0, 3, 2, 2]\n\nBefore: [2, 3, 3, 3]\n5 3 0 3\nAfter:  [2, 3, 3, 2]\n\nBefore: [0, 3, 2, 1]\n12 3 2 2\nAfter:  [0, 3, 1, 1]\n\nBefore: [0, 2, 2, 3]\n7 0 0 2\nAfter:  [0, 2, 0, 3]\n\nBefore: [2, 0, 1, 3]\n5 3 0 1\nAfter:  [2, 2, 1, 3]\n\nBefore: [2, 2, 3, 3]\n8 0 3 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [2, 0, 2, 1]\n12 3 2 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 2, 3, 3]\n7 0 0 2\nAfter:  [0, 2, 0, 3]\n\nBefore: [0, 1, 2, 1]\n12 3 2 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [0, 2, 1, 0]\n7 0 0 0\nAfter:  [0, 2, 1, 0]\n\nBefore: [2, 1, 3, 1]\n4 3 2 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [2, 3, 3, 1]\n4 3 2 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [1, 1, 2, 1]\n12 3 2 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [0, 3, 3, 1]\n7 0 0 1\nAfter:  [0, 0, 3, 1]\n\nBefore: [2, 1, 2, 0]\n10 3 3 0\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 0, 2, 0]\n2 0 2 2\nAfter:  [1, 0, 0, 0]\n\nBefore: [3, 1, 1, 3]\n8 2 3 3\nAfter:  [3, 1, 1, 1]\n\nBefore: [1, 1, 2, 3]\n13 3 1 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [2, 1, 1, 2]\n14 3 2 1\nAfter:  [2, 0, 1, 2]\n\nBefore: [1, 2, 2, 0]\n2 0 2 1\nAfter:  [1, 0, 2, 0]\n\nBefore: [0, 1, 2, 0]\n0 1 2 0\nAfter:  [0, 1, 2, 0]\n\nBefore: [2, 0, 3, 3]\n8 0 3 2\nAfter:  [2, 0, 2, 3]\n\nBefore: [1, 1, 0, 2]\n15 0 2 2\nAfter:  [1, 1, 0, 2]\n\nBefore: [1, 1, 0, 0]\n15 0 2 1\nAfter:  [1, 0, 0, 0]\n\nBefore: [2, 0, 3, 1]\n4 3 2 2\nAfter:  [2, 0, 1, 1]\n\nBefore: [3, 0, 2, 1]\n12 3 2 3\nAfter:  [3, 0, 2, 1]\n\nBefore: [1, 3, 2, 0]\n2 0 2 2\nAfter:  [1, 3, 0, 0]\n\nBefore: [2, 1, 2, 0]\n0 1 2 0\nAfter:  [0, 1, 2, 0]\n\nBefore: [2, 2, 3, 3]\n5 3 1 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [2, 2, 0, 3]\n8 1 3 1\nAfter:  [2, 2, 0, 3]\n\nBefore: [0, 2, 1, 1]\n7 0 0 3\nAfter:  [0, 2, 1, 0]\n\nBefore: [1, 3, 2, 2]\n2 0 2 0\nAfter:  [0, 3, 2, 2]\n\nBefore: [2, 1, 2, 0]\n0 1 2 2\nAfter:  [2, 1, 0, 0]\n\nBefore: [0, 0, 0, 2]\n10 3 3 1\nAfter:  [0, 1, 0, 2]\n\nBefore: [2, 3, 1, 2]\n9 3 0 0\nAfter:  [4, 3, 1, 2]\n\nBefore: [1, 2, 2, 3]\n8 0 3 3\nAfter:  [1, 2, 2, 1]\n\nBefore: [0, 2, 2, 1]\n12 3 2 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 3, 3, 1]\n4 3 2 0\nAfter:  [1, 3, 3, 1]\n\nBefore: [2, 0, 3, 3]\n8 0 3 3\nAfter:  [2, 0, 3, 2]\n\nBefore: [2, 1, 3, 2]\n9 0 0 0\nAfter:  [4, 1, 3, 2]\n\nBefore: [2, 2, 1, 2]\n14 1 2 2\nAfter:  [2, 2, 0, 2]\n\nBefore: [3, 3, 2, 2]\n14 1 3 0\nAfter:  [0, 3, 2, 2]\n\nBefore: [3, 0, 0, 2]\n10 3 3 3\nAfter:  [3, 0, 0, 1]\n\nBefore: [0, 2, 1, 3]\n8 2 3 1\nAfter:  [0, 1, 1, 3]\n\nBefore: [2, 3, 3, 1]\n4 3 2 2\nAfter:  [2, 3, 1, 1]\n\nBefore: [3, 1, 0, 3]\n13 3 1 1\nAfter:  [3, 1, 0, 3]\n\nBefore: [1, 0, 0, 3]\n15 0 2 2\nAfter:  [1, 0, 0, 3]\n\nBefore: [2, 1, 0, 1]\n6 1 3 3\nAfter:  [2, 1, 0, 1]\n\nBefore: [1, 3, 1, 0]\n9 2 0 3\nAfter:  [1, 3, 1, 2]\n\nBefore: [0, 3, 2, 1]\n12 3 2 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 1, 1, 1]\n9 2 0 0\nAfter:  [2, 1, 1, 1]\n\nBefore: [0, 2, 2, 1]\n7 0 0 1\nAfter:  [0, 0, 2, 1]\n\nBefore: [2, 0, 3, 1]\n4 3 2 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [3, 2, 3, 2]\n13 1 2 3\nAfter:  [3, 2, 3, 0]\n\nBefore: [1, 1, 1, 3]\n3 3 3 3\nAfter:  [1, 1, 1, 3]\n\nBefore: [0, 2, 3, 1]\n4 3 2 3\nAfter:  [0, 2, 3, 1]\n\nBefore: [2, 0, 1, 2]\n4 2 3 3\nAfter:  [2, 0, 1, 1]\n\nBefore: [1, 1, 2, 1]\n6 1 3 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 2, 2, 0]\n9 1 1 3\nAfter:  [0, 2, 2, 4]\n\nBefore: [3, 1, 2, 3]\n0 1 2 2\nAfter:  [3, 1, 0, 3]\n\nBefore: [2, 1, 3, 1]\n13 2 1 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [0, 1, 0, 0]\n10 3 2 0\nAfter:  [1, 1, 0, 0]\n\nBefore: [1, 1, 3, 1]\n11 1 0 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [2, 3, 1, 3]\n14 3 1 1\nAfter:  [2, 1, 1, 3]\n\nBefore: [0, 2, 2, 1]\n9 2 1 0\nAfter:  [4, 2, 2, 1]\n\nBefore: [0, 1, 3, 3]\n13 3 1 1\nAfter:  [0, 1, 3, 3]\n\nBefore: [1, 0, 2, 1]\n12 3 2 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 0, 1]\n15 0 2 0\nAfter:  [0, 0, 0, 1]\n\nBefore: [3, 1, 2, 3]\n0 1 2 1\nAfter:  [3, 0, 2, 3]\n\nBefore: [1, 1, 2, 2]\n2 0 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [3, 3, 0, 3]\n14 3 1 0\nAfter:  [1, 3, 0, 3]\n\nBefore: [0, 1, 0, 2]\n7 0 0 0\nAfter:  [0, 1, 0, 2]\n\nBefore: [0, 3, 1, 3]\n14 3 1 1\nAfter:  [0, 1, 1, 3]\n\nBefore: [3, 0, 1, 2]\n5 0 3 1\nAfter:  [3, 2, 1, 2]\n\nBefore: [2, 2, 1, 1]\n13 2 1 0\nAfter:  [0, 2, 1, 1]\n\nBefore: [3, 1, 2, 1]\n0 1 2 2\nAfter:  [3, 1, 0, 1]\n\nBefore: [0, 1, 3, 2]\n7 0 0 3\nAfter:  [0, 1, 3, 0]\n\nBefore: [3, 1, 1, 1]\n6 1 3 3\nAfter:  [3, 1, 1, 1]\n\nBefore: [3, 2, 3, 0]\n5 0 1 1\nAfter:  [3, 2, 3, 0]\n\nBefore: [0, 3, 2, 3]\n1 3 2 1\nAfter:  [0, 2, 2, 3]\n\nBefore: [2, 1, 1, 2]\n9 0 0 1\nAfter:  [2, 4, 1, 2]\n\nBefore: [2, 2, 0, 3]\n8 0 3 0\nAfter:  [2, 2, 0, 3]\n\nBefore: [0, 1, 1, 1]\n6 1 3 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 3, 3, 2]\n5 1 3 3\nAfter:  [1, 3, 3, 2]\n\nBefore: [1, 1, 0, 0]\n11 1 0 1\nAfter:  [1, 1, 0, 0]\n\nBefore: [3, 3, 1, 3]\n13 2 1 0\nAfter:  [0, 3, 1, 3]\n\nBefore: [1, 0, 1, 3]\n8 0 3 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [0, 1, 2, 1]\n6 1 3 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [0, 0, 3, 1]\n7 0 0 2\nAfter:  [0, 0, 0, 1]\n\nBefore: [3, 1, 2, 1]\n12 3 2 2\nAfter:  [3, 1, 1, 1]\n\nBefore: [3, 0, 0, 2]\n5 0 3 3\nAfter:  [3, 0, 0, 2]\n\nBefore: [1, 3, 1, 2]\n4 2 3 2\nAfter:  [1, 3, 1, 2]\n\nBefore: [1, 1, 1, 1]\n11 1 0 1\nAfter:  [1, 1, 1, 1]\n\nBefore: [0, 3, 0, 2]\n14 1 3 3\nAfter:  [0, 3, 0, 0]\n\nBefore: [0, 3, 2, 1]\n1 1 2 2\nAfter:  [0, 3, 2, 1]\n\nBefore: [0, 2, 1, 2]\n4 2 3 2\nAfter:  [0, 2, 1, 2]\n\nBefore: [1, 1, 3, 3]\n3 3 3 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [0, 2, 0, 0]\n7 0 0 3\nAfter:  [0, 2, 0, 0]\n\nBefore: [1, 1, 0, 3]\n15 0 2 2\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 1, 2, 1]\n0 1 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [3, 0, 1, 2]\n14 3 2 2\nAfter:  [3, 0, 0, 2]\n\nBefore: [1, 3, 2, 2]\n14 1 3 3\nAfter:  [1, 3, 2, 0]\n\nBefore: [1, 1, 2, 1]\n11 1 0 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 1, 1, 1]\n11 1 0 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [0, 0, 2, 3]\n1 3 2 0\nAfter:  [2, 0, 2, 3]\n\nBefore: [2, 3, 2, 3]\n3 3 3 2\nAfter:  [2, 3, 3, 3]\n\nBefore: [1, 0, 0, 0]\n10 3 2 1\nAfter:  [1, 1, 0, 0]\n\nBefore: [2, 2, 2, 3]\n9 0 1 3\nAfter:  [2, 2, 2, 4]\n\nBefore: [1, 0, 0, 1]\n15 0 2 3\nAfter:  [1, 0, 0, 0]\n\nBefore: [1, 0, 2, 1]\n2 0 2 1\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 3, 2, 3]\n2 0 2 0\nAfter:  [0, 3, 2, 3]\n\nBefore: [3, 2, 3, 1]\n13 1 2 1\nAfter:  [3, 0, 3, 1]\n\nBefore: [0, 1, 1, 3]\n8 2 3 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 3, 2, 3]\n8 0 3 0\nAfter:  [1, 3, 2, 3]\n\nBefore: [1, 3, 2, 2]\n2 0 2 2\nAfter:  [1, 3, 0, 2]\n\nBefore: [0, 0, 2, 1]\n12 3 2 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [1, 3, 0, 3]\n14 3 1 1\nAfter:  [1, 1, 0, 3]\n\nBefore: [0, 0, 2, 1]\n12 3 2 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 2, 0, 0]\n15 0 2 0\nAfter:  [0, 2, 0, 0]\n\nBefore: [1, 1, 0, 3]\n11 1 0 0\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 1, 2, 0]\n2 0 2 0\nAfter:  [0, 1, 2, 0]\n\nBefore: [2, 2, 2, 1]\n12 3 2 3\nAfter:  [2, 2, 2, 1]\n\nBefore: [3, 1, 2, 3]\n13 3 1 2\nAfter:  [3, 1, 1, 3]\n\nBefore: [3, 1, 2, 0]\n1 0 2 1\nAfter:  [3, 2, 2, 0]\n\nBefore: [0, 2, 1, 2]\n14 1 2 3\nAfter:  [0, 2, 1, 0]\n\nBefore: [3, 3, 1, 2]\n5 1 3 3\nAfter:  [3, 3, 1, 2]\n\nBefore: [2, 2, 3, 1]\n9 1 0 3\nAfter:  [2, 2, 3, 4]\n\nBefore: [1, 3, 3, 2]\n14 1 3 2\nAfter:  [1, 3, 0, 2]\n\nBefore: [1, 1, 2, 1]\n0 1 2 1\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 3, 2, 1]\n12 3 2 3\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 1, 3, 2]\n11 1 0 0\nAfter:  [1, 1, 3, 2]\n\nBefore: [2, 1, 0, 3]\n3 3 3 2\nAfter:  [2, 1, 3, 3]\n\nBefore: [1, 0, 3, 3]\n3 3 3 0\nAfter:  [3, 0, 3, 3]\n\nBefore: [1, 2, 2, 3]\n1 3 2 3\nAfter:  [1, 2, 2, 2]\n\nBefore: [0, 1, 2, 1]\n0 1 2 2\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 1, 1, 2]\n5 0 3 1\nAfter:  [3, 2, 1, 2]\n\nBefore: [3, 2, 2, 1]\n12 3 2 2\nAfter:  [3, 2, 1, 1]\n\nBefore: [1, 1, 1, 0]\n11 1 0 2\nAfter:  [1, 1, 1, 0]\n\nBefore: [2, 3, 2, 3]\n8 0 3 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [1, 3, 2, 1]\n2 0 2 1\nAfter:  [1, 0, 2, 1]\n\nBefore: [2, 1, 2, 1]\n12 3 2 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [3, 0, 2, 3]\n1 3 2 2\nAfter:  [3, 0, 2, 3]\n\nBefore: [3, 2, 0, 3]\n5 0 1 0\nAfter:  [2, 2, 0, 3]\n\nBefore: [1, 1, 2, 2]\n9 3 3 3\nAfter:  [1, 1, 2, 4]\n\nBefore: [1, 1, 0, 1]\n11 1 0 0\nAfter:  [1, 1, 0, 1]\n\nBefore: [1, 2, 3, 0]\n13 1 2 0\nAfter:  [0, 2, 3, 0]\n\nBefore: [3, 2, 0, 1]\n10 2 2 3\nAfter:  [3, 2, 0, 1]\n\nBefore: [3, 3, 2, 1]\n12 3 2 2\nAfter:  [3, 3, 1, 1]\n\nBefore: [1, 3, 2, 1]\n2 0 2 0\nAfter:  [0, 3, 2, 1]\n\nBefore: [1, 2, 2, 3]\n8 1 3 3\nAfter:  [1, 2, 2, 2]\n\nBefore: [2, 1, 2, 3]\n8 0 3 2\nAfter:  [2, 1, 2, 3]\n\nBefore: [2, 2, 2, 3]\n1 3 2 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [1, 1, 1, 0]\n11 1 0 3\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 2, 0, 3]\n5 3 1 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [3, 3, 3, 3]\n14 3 1 2\nAfter:  [3, 3, 1, 3]\n\nBefore: [3, 2, 2, 0]\n3 2 2 1\nAfter:  [3, 2, 2, 0]\n\nBefore: [1, 3, 1, 3]\n3 3 3 3\nAfter:  [1, 3, 1, 3]\n\nBefore: [0, 1, 2, 3]\n0 1 2 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [1, 0, 3, 1]\n4 3 2 3\nAfter:  [1, 0, 3, 1]\n\nBefore: [1, 3, 3, 1]\n4 3 2 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [3, 3, 1, 2]\n14 3 2 0\nAfter:  [0, 3, 1, 2]\n\nBefore: [3, 2, 2, 1]\n1 0 2 2\nAfter:  [3, 2, 2, 1]\n\nBefore: [2, 1, 0, 1]\n6 1 3 1\nAfter:  [2, 1, 0, 1]\n\nBefore: [2, 0, 3, 3]\n3 3 3 2\nAfter:  [2, 0, 3, 3]\n\nBefore: [3, 1, 2, 1]\n12 3 2 3\nAfter:  [3, 1, 2, 1]\n\nBefore: [0, 3, 2, 1]\n12 3 2 0\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 0, 2, 3]\n2 0 2 1\nAfter:  [1, 0, 2, 3]\n\nBefore: [2, 0, 1, 2]\n4 2 3 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [2, 2, 3, 3]\n9 1 1 3\nAfter:  [2, 2, 3, 4]\n\nBefore: [0, 3, 0, 3]\n14 3 1 2\nAfter:  [0, 3, 1, 3]\n\nBefore: [3, 1, 2, 1]\n0 1 2 1\nAfter:  [3, 0, 2, 1]\n\nBefore: [0, 3, 0, 1]\n7 0 0 1\nAfter:  [0, 0, 0, 1]\n\nBefore: [0, 2, 3, 1]\n4 3 2 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 1, 2, 0]\n11 1 0 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 3, 2, 2]\n1 1 2 1\nAfter:  [1, 2, 2, 2]\n\nBefore: [1, 1, 2, 2]\n11 1 0 0\nAfter:  [1, 1, 2, 2]\n\nBefore: [0, 3, 1, 3]\n13 2 1 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [2, 3, 0, 2]\n5 1 0 2\nAfter:  [2, 3, 2, 2]\n\nBefore: [2, 2, 1, 2]\n13 2 1 2\nAfter:  [2, 2, 0, 2]\n\nBefore: [1, 2, 3, 3]\n8 0 3 0\nAfter:  [1, 2, 3, 3]\n\nBefore: [1, 3, 0, 1]\n15 0 2 2\nAfter:  [1, 3, 0, 1]\n\nBefore: [1, 1, 2, 3]\n11 1 0 0\nAfter:  [1, 1, 2, 3]\n\nBefore: [2, 3, 0, 0]\n5 1 0 1\nAfter:  [2, 2, 0, 0]\n\nBefore: [1, 2, 2, 1]\n12 3 2 3\nAfter:  [1, 2, 2, 1]\n\nBefore: [0, 1, 2, 1]\n6 1 3 3\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 2, 1, 3]\n3 3 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [1, 0, 0, 1]\n15 0 2 2\nAfter:  [1, 0, 0, 1]\n\nBefore: [0, 1, 3, 1]\n6 1 3 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [3, 2, 2, 1]\n12 3 2 3\nAfter:  [3, 2, 2, 1]\n\nBefore: [1, 0, 2, 1]\n12 3 2 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 3, 0, 3]\n15 0 2 3\nAfter:  [1, 3, 0, 0]\n\nBefore: [2, 1, 2, 1]\n12 3 2 3\nAfter:  [2, 1, 2, 1]\n\nBefore: [2, 2, 3, 2]\n9 1 3 3\nAfter:  [2, 2, 3, 4]\n\nBefore: [2, 2, 0, 3]\n5 3 0 0\nAfter:  [2, 2, 0, 3]\n\nBefore: [3, 1, 0, 0]\n10 2 2 1\nAfter:  [3, 1, 0, 0]\n\nBefore: [1, 2, 1, 3]\n8 2 3 3\nAfter:  [1, 2, 1, 1]\n\nBefore: [1, 1, 3, 1]\n6 1 3 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 2, 2, 1]\n12 3 2 3\nAfter:  [0, 2, 2, 1]\n\nBefore: [1, 1, 2, 3]\n2 0 2 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [2, 3, 1, 2]\n4 2 3 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [1, 0, 2, 1]\n12 3 2 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 3, 1, 2]\n14 3 2 2\nAfter:  [1, 3, 0, 2]\n\nBefore: [3, 1, 2, 1]\n6 1 3 3\nAfter:  [3, 1, 2, 1]\n\nBefore: [3, 0, 2, 2]\n9 3 3 3\nAfter:  [3, 0, 2, 4]\n\nBefore: [0, 2, 2, 0]\n3 2 2 2\nAfter:  [0, 2, 2, 0]\n\nBefore: [1, 1, 0, 0]\n11 1 0 2\nAfter:  [1, 1, 1, 0]\n\nBefore: [1, 3, 2, 2]\n14 1 3 0\nAfter:  [0, 3, 2, 2]\n\nBefore: [1, 1, 0, 3]\n8 0 3 0\nAfter:  [1, 1, 0, 3]\n\nBefore: [2, 2, 1, 0]\n14 1 2 1\nAfter:  [2, 0, 1, 0]\n\nBefore: [3, 2, 3, 1]\n4 3 2 3\nAfter:  [3, 2, 3, 1]\n\nBefore: [0, 2, 0, 0]\n10 2 2 3\nAfter:  [0, 2, 0, 1]\n\nBefore: [2, 2, 1, 2]\n4 2 3 2\nAfter:  [2, 2, 1, 2]\n\nBefore: [1, 3, 0, 3]\n15 0 2 1\nAfter:  [1, 0, 0, 3]\n\nBefore: [1, 0, 3, 1]\n4 3 2 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [1, 0, 2, 3]\n8 0 3 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [3, 0, 0, 0]\n10 2 2 0\nAfter:  [1, 0, 0, 0]\n\nBefore: [1, 1, 3, 1]\n6 1 3 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 2, 0, 0]\n10 3 3 1\nAfter:  [0, 1, 0, 0]\n\nBefore: [2, 1, 0, 1]\n6 1 3 0\nAfter:  [1, 1, 0, 1]\n\nBefore: [0, 1, 0, 1]\n6 1 3 3\nAfter:  [0, 1, 0, 1]\n\nBefore: [0, 3, 0, 3]\n7 0 0 2\nAfter:  [0, 3, 0, 3]\n\nBefore: [1, 3, 0, 0]\n15 0 2 1\nAfter:  [1, 0, 0, 0]\n\nBefore: [2, 1, 1, 1]\n6 1 3 0\nAfter:  [1, 1, 1, 1]\n\nBefore: [1, 2, 3, 1]\n4 3 2 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [1, 2, 0, 2]\n9 3 3 1\nAfter:  [1, 4, 0, 2]\n\nBefore: [1, 2, 2, 3]\n2 0 2 3\nAfter:  [1, 2, 2, 0]\n\nBefore: [0, 2, 1, 3]\n8 1 3 0\nAfter:  [2, 2, 1, 3]\n\nBefore: [3, 2, 2, 0]\n1 0 2 2\nAfter:  [3, 2, 2, 0]\n\nBefore: [0, 1, 2, 3]\n0 1 2 3\nAfter:  [0, 1, 2, 0]\n\nBefore: [2, 2, 2, 1]\n12 3 2 2\nAfter:  [2, 2, 1, 1]\n\nBefore: [1, 2, 1, 2]\n9 3 1 3\nAfter:  [1, 2, 1, 4]\n\nBefore: [1, 1, 1, 1]\n11 1 0 3\nAfter:  [1, 1, 1, 1]\n\nBefore: [1, 1, 0, 3]\n15 0 2 0\nAfter:  [0, 1, 0, 3]\n\nBefore: [0, 1, 1, 1]\n6 1 3 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [2, 3, 1, 3]\n3 3 3 0\nAfter:  [3, 3, 1, 3]\n\nBefore: [3, 3, 2, 1]\n12 3 2 1\nAfter:  [3, 1, 2, 1]\n\nBefore: [3, 2, 2, 3]\n5 3 1 3\nAfter:  [3, 2, 2, 2]\n\nBefore: [1, 1, 2, 3]\n0 1 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [0, 3, 0, 3]\n14 3 1 3\nAfter:  [0, 3, 0, 1]\n\nBefore: [3, 2, 1, 3]\n9 1 1 2\nAfter:  [3, 2, 4, 3]\n\nBefore: [2, 3, 2, 3]\n1 1 2 0\nAfter:  [2, 3, 2, 3]\n\nBefore: [0, 3, 2, 3]\n7 0 0 3\nAfter:  [0, 3, 2, 0]\n\nBefore: [0, 2, 1, 3]\n8 2 3 3\nAfter:  [0, 2, 1, 1]\n\nBefore: [0, 1, 2, 2]\n3 2 2 2\nAfter:  [0, 1, 2, 2]\n\nBefore: [3, 2, 2, 3]\n8 1 3 0\nAfter:  [2, 2, 2, 3]\n\nBefore: [0, 1, 1, 1]\n6 1 3 0\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 2, 1, 2]\n9 3 0 0\nAfter:  [4, 2, 1, 2]\n\nBefore: [0, 0, 1, 2]\n4 2 3 2\nAfter:  [0, 0, 1, 2]\n\nBefore: [1, 0, 0, 2]\n15 0 2 3\nAfter:  [1, 0, 0, 0]\n\nBefore: [2, 1, 2, 3]\n0 1 2 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [2, 0, 0, 0]\n10 3 2 0\nAfter:  [1, 0, 0, 0]\n\nBefore: [0, 1, 3, 1]\n6 1 3 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [2, 2, 0, 2]\n9 1 3 2\nAfter:  [2, 2, 4, 2]\n\nBefore: [1, 0, 2, 1]\n2 0 2 2\nAfter:  [1, 0, 0, 1]\n\nBefore: [3, 1, 1, 1]\n6 1 3 1\nAfter:  [3, 1, 1, 1]\n\nBefore: [1, 0, 2, 2]\n2 0 2 1\nAfter:  [1, 0, 2, 2]\n\nBefore: [3, 2, 2, 3]\n1 0 2 1\nAfter:  [3, 2, 2, 3]\n\nBefore: [0, 3, 2, 3]\n1 3 2 3\nAfter:  [0, 3, 2, 2]\n\nBefore: [1, 0, 2, 3]\n1 3 2 1\nAfter:  [1, 2, 2, 3]\n\nBefore: [2, 2, 1, 2]\n4 2 3 3\nAfter:  [2, 2, 1, 1]\n\nBefore: [1, 1, 1, 2]\n14 3 2 3\nAfter:  [1, 1, 1, 0]\n\nBefore: [2, 3, 1, 2]\n4 2 3 0\nAfter:  [1, 3, 1, 2]\n\nBefore: [2, 3, 0, 3]\n9 0 0 3\nAfter:  [2, 3, 0, 4]\n\nBefore: [2, 0, 2, 3]\n3 3 3 2\nAfter:  [2, 0, 3, 3]\n\nBefore: [1, 1, 1, 2]\n4 2 3 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [3, 2, 3, 3]\n5 0 1 0\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 1, 2, 0]\n11 1 0 0\nAfter:  [1, 1, 2, 0]\n\nBefore: [3, 2, 3, 0]\n13 1 2 1\nAfter:  [3, 0, 3, 0]\n\nBefore: [1, 1, 0, 2]\n15 0 2 0\nAfter:  [0, 1, 0, 2]\n\nBefore: [1, 0, 2, 2]\n2 0 2 3\nAfter:  [1, 0, 2, 0]\n\nBefore: [1, 2, 1, 1]\n13 2 1 3\nAfter:  [1, 2, 1, 0]\n\nBefore: [3, 0, 2, 1]\n1 0 2 2\nAfter:  [3, 0, 2, 1]\n\nBefore: [2, 2, 1, 3]\n8 0 3 0\nAfter:  [2, 2, 1, 3]\n\nBefore: [2, 2, 2, 2]\n9 2 1 3\nAfter:  [2, 2, 2, 4]\n\nBefore: [0, 0, 1, 0]\n7 0 0 0\nAfter:  [0, 0, 1, 0]\n\nBefore: [2, 3, 1, 1]\n9 2 3 0\nAfter:  [2, 3, 1, 1]\n\nBefore: [1, 0, 1, 2]\n4 2 3 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [3, 1, 1, 3]\n13 3 1 3\nAfter:  [3, 1, 1, 1]\n\nBefore: [3, 2, 2, 3]\n3 3 3 2\nAfter:  [3, 2, 3, 3]\n\nBefore: [2, 1, 2, 3]\n0 1 2 2\nAfter:  [2, 1, 0, 3]\n\nBefore: [1, 2, 2, 1]\n2 0 2 1\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 2, 2, 1]\n12 3 2 0\nAfter:  [1, 2, 2, 1]\n\nBefore: [3, 2, 0, 0]\n5 0 1 2\nAfter:  [3, 2, 2, 0]\n\nBefore: [0, 1, 1, 2]\n4 2 3 1\nAfter:  [0, 1, 1, 2]\n\nBefore: [3, 1, 2, 0]\n3 2 2 2\nAfter:  [3, 1, 2, 0]\n\nBefore: [1, 1, 0, 3]\n15 0 2 1\nAfter:  [1, 0, 0, 3]\n\nBefore: [0, 3, 2, 3]\n1 1 2 1\nAfter:  [0, 2, 2, 3]\n\nBefore: [1, 1, 0, 0]\n10 3 3 2\nAfter:  [1, 1, 1, 0]\n\nBefore: [1, 1, 2, 2]\n2 0 2 2\nAfter:  [1, 1, 0, 2]\n\nBefore: [1, 1, 2, 0]\n0 1 2 0\nAfter:  [0, 1, 2, 0]\n\nBefore: [3, 2, 2, 2]\n5 0 3 3\nAfter:  [3, 2, 2, 2]\n\nBefore: [3, 1, 2, 1]\n0 1 2 3\nAfter:  [3, 1, 2, 0]\n\nBefore: [2, 0, 2, 0]\n3 2 2 1\nAfter:  [2, 2, 2, 0]\n\nBefore: [0, 1, 0, 1]\n6 1 3 1\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 2, 2, 0]\n10 3 3 0\nAfter:  [1, 2, 2, 0]\n\nBefore: [1, 1, 1, 1]\n6 1 3 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [3, 3, 2, 2]\n1 0 2 0\nAfter:  [2, 3, 2, 2]\n\nBefore: [1, 1, 3, 1]\n11 1 0 3\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 2, 1, 2]\n7 0 0 3\nAfter:  [0, 2, 1, 0]\n\nBefore: [1, 3, 2, 1]\n12 3 2 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 3, 1, 3]\n8 0 3 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [2, 2, 0, 2]\n9 0 3 0\nAfter:  [4, 2, 0, 2]\n\nBefore: [1, 1, 1, 1]\n11 1 0 0\nAfter:  [1, 1, 1, 1]\n\nBefore: [0, 2, 2, 1]\n12 3 2 2\nAfter:  [0, 2, 1, 1]\n\nBefore: [1, 1, 3, 1]\n13 2 1 3\nAfter:  [1, 1, 3, 1]\n\nBefore: [3, 1, 1, 2]\n9 3 3 3\nAfter:  [3, 1, 1, 4]\n\nBefore: [0, 1, 3, 1]\n7 0 0 0\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 1, 3, 1]\n6 1 3 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [1, 2, 0, 1]\n15 0 2 1\nAfter:  [1, 0, 0, 1]\n\nBefore: [1, 1, 2, 1]\n12 3 2 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 0, 1, 1]\n9 2 0 1\nAfter:  [1, 2, 1, 1]\n\nBefore: [2, 1, 0, 3]\n8 0 3 0\nAfter:  [2, 1, 0, 3]\n\nBefore: [3, 1, 2, 2]\n0 1 2 1\nAfter:  [3, 0, 2, 2]\n\nBefore: [1, 3, 1, 0]\n13 2 1 3\nAfter:  [1, 3, 1, 0]\n\nBefore: [2, 0, 3, 3]\n3 3 3 1\nAfter:  [2, 3, 3, 3]\n\nBefore: [1, 1, 2, 1]\n11 1 0 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 3, 2, 1]\n12 3 2 3\nAfter:  [0, 3, 2, 1]\n\nBefore: [3, 2, 1, 2]\n4 2 3 1\nAfter:  [3, 1, 1, 2]\n\nBefore: [1, 1, 2, 1]\n6 1 3 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [3, 3, 2, 1]\n12 3 2 0\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 1, 3, 3]\n11 1 0 3\nAfter:  [1, 1, 3, 1]\n\nBefore: [2, 3, 2, 0]\n1 1 2 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [3, 1, 2, 0]\n0 1 2 0\nAfter:  [0, 1, 2, 0]\n\nBefore: [2, 2, 3, 3]\n13 1 2 1\nAfter:  [2, 0, 3, 3]\n\nBefore: [0, 0, 2, 1]\n12 3 2 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 3, 3, 3]\n8 0 3 0\nAfter:  [1, 3, 3, 3]\n\nBefore: [2, 3, 2, 2]\n3 2 2 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [3, 2, 1, 3]\n5 3 1 2\nAfter:  [3, 2, 2, 3]\n\nBefore: [0, 3, 0, 0]\n10 3 3 1\nAfter:  [0, 1, 0, 0]\n\nBefore: [2, 1, 2, 3]\n1 3 2 3\nAfter:  [2, 1, 2, 2]\n\nBefore: [1, 3, 2, 3]\n8 0 3 2\nAfter:  [1, 3, 1, 3]\n\nBefore: [2, 1, 2, 2]\n9 0 0 0\nAfter:  [4, 1, 2, 2]\n\nBefore: [3, 3, 0, 2]\n5 1 3 1\nAfter:  [3, 2, 0, 2]\n\nBefore: [3, 2, 1, 3]\n8 2 3 1\nAfter:  [3, 1, 1, 3]\n\nBefore: [2, 3, 3, 3]\n9 0 0 3\nAfter:  [2, 3, 3, 4]\n\nBefore: [3, 0, 2, 1]\n12 3 2 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [2, 1, 2, 2]\n0 1 2 3\nAfter:  [2, 1, 2, 0]\n\nBefore: [2, 1, 0, 2]\n10 2 2 2\nAfter:  [2, 1, 1, 2]\n\nBefore: [2, 1, 0, 3]\n5 3 0 1\nAfter:  [2, 2, 0, 3]\n\nBefore: [1, 1, 2, 1]\n12 3 2 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [2, 3, 2, 2]\n1 1 2 3\nAfter:  [2, 3, 2, 2]\n\nBefore: [0, 2, 1, 2]\n13 2 1 0\nAfter:  [0, 2, 1, 2]\n\nBefore: [1, 2, 3, 3]\n8 0 3 3\nAfter:  [1, 2, 3, 1]\n\nBefore: [1, 0, 2, 1]\n2 0 2 3\nAfter:  [1, 0, 2, 0]\n\nBefore: [1, 0, 0, 3]\n15 0 2 3\nAfter:  [1, 0, 0, 0]\n\nBefore: [1, 1, 1, 3]\n11 1 0 0\nAfter:  [1, 1, 1, 3]\n\nBefore: [3, 1, 3, 3]\n13 2 1 1\nAfter:  [3, 1, 3, 3]\n\nBefore: [3, 2, 2, 1]\n12 3 2 1\nAfter:  [3, 1, 2, 1]\n\nBefore: [3, 2, 1, 2]\n5 0 3 3\nAfter:  [3, 2, 1, 2]\n\nBefore: [2, 2, 2, 2]\n9 2 1 0\nAfter:  [4, 2, 2, 2]\n\nBefore: [0, 2, 3, 2]\n9 1 3 3\nAfter:  [0, 2, 3, 4]\n\nBefore: [3, 2, 2, 3]\n1 3 2 1\nAfter:  [3, 2, 2, 3]\n\nBefore: [0, 3, 2, 3]\n1 3 2 2\nAfter:  [0, 3, 2, 3]\n\nBefore: [1, 1, 2, 2]\n11 1 0 2\nAfter:  [1, 1, 1, 2]\n\nBefore: [3, 1, 1, 2]\n4 2 3 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 1, 2, 0]\n0 1 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [0, 3, 1, 1]\n13 2 1 1\nAfter:  [0, 0, 1, 1]\n\nBefore: [2, 3, 2, 3]\n1 1 2 2\nAfter:  [2, 3, 2, 3]\n\nBefore: [3, 2, 0, 1]\n5 0 1 1\nAfter:  [3, 2, 0, 1]\n\nBefore: [2, 0, 3, 0]\n10 3 3 2\nAfter:  [2, 0, 1, 0]\n\nBefore: [0, 0, 1, 2]\n14 3 2 3\nAfter:  [0, 0, 1, 0]\n\nBefore: [1, 1, 1, 3]\n11 1 0 2\nAfter:  [1, 1, 1, 3]\n\nBefore: [0, 3, 2, 2]\n5 1 3 1\nAfter:  [0, 2, 2, 2]\n\nBefore: [1, 2, 2, 3]\n8 0 3 2\nAfter:  [1, 2, 1, 3]\n\nBefore: [0, 0, 1, 2]\n4 2 3 0\nAfter:  [1, 0, 1, 2]\n\nBefore: [0, 2, 1, 2]\n4 2 3 3\nAfter:  [0, 2, 1, 1]\n\nBefore: [0, 2, 0, 3]\n3 3 3 2\nAfter:  [0, 2, 3, 3]\n\nBefore: [1, 1, 2, 1]\n0 1 2 0\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 1, 0, 1]\n15 0 2 1\nAfter:  [1, 0, 0, 1]\n\nBefore: [1, 2, 0, 2]\n15 0 2 0\nAfter:  [0, 2, 0, 2]\n\nBefore: [1, 0, 0, 3]\n15 0 2 0\nAfter:  [0, 0, 0, 3]\n\nBefore: [0, 1, 2, 3]\n1 3 2 1\nAfter:  [0, 2, 2, 3]\n\nBefore: [1, 3, 2, 1]\n12 3 2 0\nAfter:  [1, 3, 2, 1]\n\nBefore: [3, 3, 2, 2]\n5 1 3 2\nAfter:  [3, 3, 2, 2]\n\nBefore: [1, 1, 0, 1]\n6 1 3 0\nAfter:  [1, 1, 0, 1]\n\nBefore: [3, 3, 3, 3]\n3 3 3 3\nAfter:  [3, 3, 3, 3]\n\nBefore: [1, 1, 2, 1]\n0 1 2 2\nAfter:  [1, 1, 0, 1]\n\nBefore: [3, 1, 3, 1]\n6 1 3 1\nAfter:  [3, 1, 3, 1]\n\nBefore: [3, 2, 1, 0]\n13 2 1 1\nAfter:  [3, 0, 1, 0]\n\nBefore: [0, 2, 3, 0]\n7 0 0 2\nAfter:  [0, 2, 0, 0]\n\nBefore: [3, 3, 1, 3]\n8 2 3 2\nAfter:  [3, 3, 1, 3]\n\nBefore: [2, 1, 2, 1]\n6 1 3 2\nAfter:  [2, 1, 1, 1]\n\nBefore: [1, 3, 2, 0]\n2 0 2 0\nAfter:  [0, 3, 2, 0]\n\nBefore: [0, 3, 1, 2]\n10 3 3 0\nAfter:  [1, 3, 1, 2]\n\nBefore: [1, 2, 0, 0]\n15 0 2 2\nAfter:  [1, 2, 0, 0]\n\nBefore: [1, 3, 0, 0]\n15 0 2 2\nAfter:  [1, 3, 0, 0]\n\nBefore: [2, 2, 2, 1]\n12 3 2 0\nAfter:  [1, 2, 2, 1]\n\nBefore: [1, 1, 0, 2]\n11 1 0 3\nAfter:  [1, 1, 0, 1]\n\nBefore: [2, 1, 2, 1]\n0 1 2 0\nAfter:  [0, 1, 2, 1]\n\nBefore: [3, 2, 1, 1]\n9 1 1 2\nAfter:  [3, 2, 4, 1]\n\nBefore: [1, 0, 0, 0]\n15 0 2 0\nAfter:  [0, 0, 0, 0]\n\nBefore: [2, 3, 0, 2]\n5 1 3 3\nAfter:  [2, 3, 0, 2]\n\nBefore: [1, 3, 2, 2]\n1 1 2 3\nAfter:  [1, 3, 2, 2]\n\nBefore: [2, 3, 3, 0]\n5 1 0 1\nAfter:  [2, 2, 3, 0]\n\nBefore: [1, 3, 2, 3]\n2 0 2 1\nAfter:  [1, 0, 2, 3]\n\nBefore: [1, 2, 0, 1]\n15 0 2 0\nAfter:  [0, 2, 0, 1]\n\nBefore: [3, 2, 3, 2]\n13 1 2 2\nAfter:  [3, 2, 0, 2]\n\nBefore: [3, 2, 3, 3]\n13 1 2 1\nAfter:  [3, 0, 3, 3]\n\nBefore: [3, 1, 0, 1]\n6 1 3 2\nAfter:  [3, 1, 1, 1]\n\nBefore: [1, 1, 1, 2]\n11 1 0 1\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 2, 2, 1]\n12 3 2 0\nAfter:  [1, 2, 2, 1]\n\nBefore: [2, 2, 3, 3]\n9 1 0 0\nAfter:  [4, 2, 3, 3]\n\nBefore: [0, 1, 0, 1]\n6 1 3 0\nAfter:  [1, 1, 0, 1]\n\nBefore: [1, 0, 3, 1]\n4 3 2 0\nAfter:  [1, 0, 3, 1]\n\nBefore: [0, 1, 3, 1]\n6 1 3 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [3, 2, 3, 1]\n13 3 1 1\nAfter:  [3, 0, 3, 1]\n\nBefore: [1, 0, 1, 3]\n8 2 3 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [2, 0, 2, 0]\n10 3 3 3\nAfter:  [2, 0, 2, 1]\n\nBefore: [3, 2, 2, 2]\n5 0 3 2\nAfter:  [3, 2, 2, 2]\n\nBefore: [1, 2, 0, 3]\n15 0 2 1\nAfter:  [1, 0, 0, 3]\n\nBefore: [0, 3, 1, 3]\n8 2 3 1\nAfter:  [0, 1, 1, 3]\n\nBefore: [0, 3, 2, 2]\n5 1 3 2\nAfter:  [0, 3, 2, 2]\n\nBefore: [1, 1, 0, 3]\n11 1 0 3\nAfter:  [1, 1, 0, 1]\n\nBefore: [1, 2, 0, 2]\n15 0 2 2\nAfter:  [1, 2, 0, 2]\n\nBefore: [1, 1, 2, 1]\n6 1 3 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 0, 2, 2]\n3 2 2 2\nAfter:  [1, 0, 2, 2]\n\nBefore: [2, 1, 2, 3]\n8 0 3 3\nAfter:  [2, 1, 2, 2]\n\nBefore: [1, 3, 0, 0]\n15 0 2 3\nAfter:  [1, 3, 0, 0]\n\nBefore: [2, 2, 2, 3]\n1 3 2 0\nAfter:  [2, 2, 2, 3]\n\nBefore: [3, 2, 2, 3]\n1 3 2 2\nAfter:  [3, 2, 2, 3]\n\nBefore: [3, 1, 3, 1]\n4 3 2 2\nAfter:  [3, 1, 1, 1]\n\nBefore: [1, 3, 2, 2]\n2 0 2 3\nAfter:  [1, 3, 2, 0]\n\nBefore: [1, 1, 3, 0]\n11 1 0 2\nAfter:  [1, 1, 1, 0]\n\nBefore: [2, 3, 2, 2]\n5 1 0 2\nAfter:  [2, 3, 2, 2]\n\nBefore: [1, 1, 2, 1]\n12 3 2 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 0, 2, 2]\n7 0 0 3\nAfter:  [0, 0, 2, 0]\n\nBefore: [3, 1, 1, 3]\n13 3 1 2\nAfter:  [3, 1, 1, 3]\n\nBefore: [1, 1, 0, 3]\n11 1 0 2\nAfter:  [1, 1, 1, 3]\n\nBefore: [3, 2, 1, 2]\n5 0 3 2\nAfter:  [3, 2, 2, 2]\n\nBefore: [0, 2, 2, 2]\n10 3 3 0\nAfter:  [1, 2, 2, 2]\n\nBefore: [3, 2, 1, 1]\n14 1 2 3\nAfter:  [3, 2, 1, 0]\n\nBefore: [1, 2, 1, 2]\n13 2 1 2\nAfter:  [1, 2, 0, 2]\n\nBefore: [0, 0, 3, 1]\n4 3 2 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [2, 1, 2, 1]\n0 1 2 3\nAfter:  [2, 1, 2, 0]\n\nBefore: [3, 0, 2, 2]\n3 2 2 1\nAfter:  [3, 2, 2, 2]\n\nBefore: [1, 1, 3, 0]\n11 1 0 0\nAfter:  [1, 1, 3, 0]\n\nBefore: [2, 3, 1, 0]\n13 2 1 2\nAfter:  [2, 3, 0, 0]\n\nBefore: [2, 1, 2, 3]\n1 3 2 0\nAfter:  [2, 1, 2, 3]\n\nBefore: [1, 3, 1, 2]\n4 2 3 0\nAfter:  [1, 3, 1, 2]\n\nBefore: [0, 1, 0, 0]\n7 0 0 2\nAfter:  [0, 1, 0, 0]\n\nBefore: [3, 1, 1, 3]\n3 3 3 2\nAfter:  [3, 1, 3, 3]\n\nBefore: [1, 1, 2, 1]\n2 0 2 2\nAfter:  [1, 1, 0, 1]\n\nBefore: [1, 2, 3, 0]\n10 3 3 0\nAfter:  [1, 2, 3, 0]\n\nBefore: [0, 3, 2, 1]\n1 1 2 1\nAfter:  [0, 2, 2, 1]\n\nBefore: [0, 3, 3, 1]\n7 0 0 3\nAfter:  [0, 3, 3, 0]\n\nBefore: [1, 2, 2, 0]\n3 2 2 2\nAfter:  [1, 2, 2, 0]\n\nBefore: [1, 1, 0, 1]\n11 1 0 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 1, 3, 3]\n13 3 1 0\nAfter:  [1, 1, 3, 3]\n\nBefore: [3, 2, 2, 1]\n5 0 1 2\nAfter:  [3, 2, 2, 1]\n\nBefore: [2, 1, 0, 3]\n5 3 0 3\nAfter:  [2, 1, 0, 2]\n\nBefore: [1, 1, 1, 2]\n4 2 3 2\nAfter:  [1, 1, 1, 2]\n\nBefore: [2, 1, 2, 1]\n12 3 2 2\nAfter:  [2, 1, 1, 1]\n\nBefore: [3, 1, 2, 2]\n9 3 3 1\nAfter:  [3, 4, 2, 2]\n\nBefore: [1, 3, 2, 2]\n9 3 3 0\nAfter:  [4, 3, 2, 2]\n\nBefore: [1, 2, 0, 3]\n5 3 1 0\nAfter:  [2, 2, 0, 3]\n\nBefore: [1, 2, 2, 0]\n2 0 2 2\nAfter:  [1, 2, 0, 0]\n\nBefore: [3, 2, 3, 1]\n13 3 1 0\nAfter:  [0, 2, 3, 1]\n\nBefore: [0, 3, 3, 2]\n14 1 3 0\nAfter:  [0, 3, 3, 2]\n\nBefore: [0, 3, 1, 1]\n9 2 3 2\nAfter:  [0, 3, 2, 1]\n\nBefore: [2, 1, 2, 3]\n5 3 0 3\nAfter:  [2, 1, 2, 2]\n\nBefore: [2, 2, 2, 1]\n12 3 2 1\nAfter:  [2, 1, 2, 1]\n\nBefore: [2, 1, 2, 3]\n0 1 2 3\nAfter:  [2, 1, 2, 0]\n\nBefore: [0, 2, 0, 3]\n8 1 3 1\nAfter:  [0, 2, 0, 3]\n\nBefore: [1, 1, 2, 2]\n2 0 2 1\nAfter:  [1, 0, 2, 2]\n\nBefore: [2, 3, 2, 1]\n1 1 2 2\nAfter:  [2, 3, 2, 1]\n\nBefore: [0, 3, 0, 3]\n3 3 3 0\nAfter:  [3, 3, 0, 3]\n\nBefore: [1, 3, 0, 2]\n15 0 2 3\nAfter:  [1, 3, 0, 0]\n\nBefore: [3, 0, 2, 3]\n1 0 2 3\nAfter:  [3, 0, 2, 2]\n\nBefore: [0, 2, 0, 1]\n7 0 0 2\nAfter:  [0, 2, 0, 1]\n\nBefore: [1, 2, 2, 1]\n2 0 2 2\nAfter:  [1, 2, 0, 1]\n\nBefore: [0, 0, 2, 2]\n7 0 0 1\nAfter:  [0, 0, 2, 2]\n\nBefore: [3, 0, 2, 1]\n12 3 2 2\nAfter:  [3, 0, 1, 1]\n\nBefore: [2, 2, 1, 1]\n13 3 1 0\nAfter:  [0, 2, 1, 1]\n\nBefore: [3, 1, 0, 1]\n6 1 3 1\nAfter:  [3, 1, 0, 1]\n\nBefore: [3, 3, 2, 0]\n1 1 2 0\nAfter:  [2, 3, 2, 0]\n\nBefore: [2, 2, 1, 2]\n9 1 1 3\nAfter:  [2, 2, 1, 4]\n\nBefore: [3, 2, 3, 0]\n5 0 1 3\nAfter:  [3, 2, 3, 2]\n\nBefore: [1, 0, 2, 3]\n2 0 2 3\nAfter:  [1, 0, 2, 0]\n\nBefore: [1, 1, 2, 3]\n0 1 2 1\nAfter:  [1, 0, 2, 3]\n\nBefore: [2, 2, 2, 2]\n9 3 3 1\nAfter:  [2, 4, 2, 2]\n\nBefore: [1, 2, 2, 0]\n2 0 2 0\nAfter:  [0, 2, 2, 0]\n\nBefore: [1, 0, 0, 1]\n10 2 2 1\nAfter:  [1, 1, 0, 1]\n\nBefore: [1, 1, 2, 3]\n11 1 0 2\nAfter:  [1, 1, 1, 3]\n\nBefore: [2, 2, 0, 2]\n9 1 3 3\nAfter:  [2, 2, 0, 4]\n\nBefore: [2, 2, 1, 2]\n4 2 3 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [1, 2, 2, 2]\n3 2 2 2\nAfter:  [1, 2, 2, 2]\n\nBefore: [2, 0, 1, 3]\n8 0 3 2\nAfter:  [2, 0, 2, 3]\n\nBefore: [3, 3, 0, 2]\n10 3 3 2\nAfter:  [3, 3, 1, 2]\n\nBefore: [1, 2, 2, 3]\n2 0 2 0\nAfter:  [0, 2, 2, 3]\n\nBefore: [0, 2, 1, 3]\n14 1 2 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [3, 1, 1, 2]\n4 2 3 2\nAfter:  [3, 1, 1, 2]\n\nBefore: [2, 3, 2, 3]\n14 3 1 1\nAfter:  [2, 1, 2, 3]\n\nBefore: [1, 1, 0, 0]\n11 1 0 0\nAfter:  [1, 1, 0, 0]\n\nBefore: [2, 3, 1, 3]\n8 2 3 3\nAfter:  [2, 3, 1, 1]\n\nBefore: [3, 3, 2, 1]\n12 3 2 3\nAfter:  [3, 3, 2, 1]\n\nBefore: [0, 1, 0, 3]\n7 0 0 0\nAfter:  [0, 1, 0, 3]\n\nBefore: [3, 3, 3, 1]\n4 3 2 2\nAfter:  [3, 3, 1, 1]\n\nBefore: [2, 2, 3, 3]\n8 0 3 0\nAfter:  [2, 2, 3, 3]\n\nBefore: [2, 2, 0, 0]\n10 3 3 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [1, 1, 1, 1]\n6 1 3 3\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 3, 3, 2]\n10 3 3 3\nAfter:  [2, 3, 3, 1]\n\nBefore: [2, 1, 3, 1]\n6 1 3 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [1, 0, 0, 3]\n8 0 3 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [1, 0, 0, 3]\n15 0 2 1\nAfter:  [1, 0, 0, 3]\n\nBefore: [2, 2, 0, 2]\n9 3 3 3\nAfter:  [2, 2, 0, 4]\n\nBefore: [3, 2, 0, 3]\n8 1 3 0\nAfter:  [2, 2, 0, 3]\n\nBefore: [0, 2, 2, 0]\n3 2 2 3\nAfter:  [0, 2, 2, 2]\n\nBefore: [3, 1, 3, 1]\n6 1 3 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [1, 0, 2, 0]\n2 0 2 1\nAfter:  [1, 0, 2, 0]\n\nBefore: [2, 3, 0, 3]\n3 3 3 1\nAfter:  [2, 3, 0, 3]\n\nBefore: [0, 1, 2, 0]\n10 3 3 0\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 3, 0, 0]\n15 0 2 0\nAfter:  [0, 3, 0, 0]\n\nBefore: [1, 1, 0, 2]\n11 1 0 0\nAfter:  [1, 1, 0, 2]\n\nBefore: [0, 2, 2, 2]\n7 0 0 1\nAfter:  [0, 0, 2, 2]\n\nBefore: [2, 3, 1, 2]\n14 1 3 1\nAfter:  [2, 0, 1, 2]\n\nBefore: [2, 2, 1, 3]\n8 0 3 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [3, 3, 2, 3]\n1 3 2 3\nAfter:  [3, 3, 2, 2]\n\nBefore: [2, 3, 2, 3]\n1 3 2 1\nAfter:  [2, 2, 2, 3]\n\nBefore: [1, 1, 2, 2]\n0 1 2 3\nAfter:  [1, 1, 2, 0]\n\nBefore: [0, 1, 1, 3]\n7 0 0 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [1, 1, 1, 2]\n11 1 0 2\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 0, 1, 2]\n4 2 3 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [0, 2, 3, 1]\n4 3 2 2\nAfter:  [0, 2, 1, 1]\n\nBefore: [1, 1, 1, 3]\n11 1 0 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [1, 1, 0, 2]\n15 0 2 1\nAfter:  [1, 0, 0, 2]\n\nBefore: [0, 2, 1, 2]\n14 1 2 1\nAfter:  [0, 0, 1, 2]\n\nBefore: [1, 2, 1, 1]\n13 3 1 2\nAfter:  [1, 2, 0, 1]\n\nBefore: [1, 3, 0, 2]\n15 0 2 2\nAfter:  [1, 3, 0, 2]\n\nBefore: [0, 3, 3, 2]\n14 1 3 3\nAfter:  [0, 3, 3, 0]\n\nBefore: [2, 0, 1, 1]\n9 0 0 3\nAfter:  [2, 0, 1, 4]\n\nBefore: [1, 1, 0, 1]\n6 1 3 1\nAfter:  [1, 1, 0, 1]\n\nBefore: [3, 3, 2, 2]\n9 2 3 0\nAfter:  [4, 3, 2, 2]\n\nBefore: [2, 1, 2, 3]\n5 3 0 0\nAfter:  [2, 1, 2, 3]\n\nBefore: [2, 1, 2, 2]\n9 3 3 2\nAfter:  [2, 1, 4, 2]\n\nBefore: [0, 1, 2, 2]\n0 1 2 1\nAfter:  [0, 0, 2, 2]\n\nBefore: [2, 2, 3, 1]\n4 3 2 3\nAfter:  [2, 2, 3, 1]\n\nBefore: [3, 2, 3, 0]\n10 3 3 3\nAfter:  [3, 2, 3, 1]\n\nBefore: [3, 1, 2, 0]\n1 0 2 0\nAfter:  [2, 1, 2, 0]\n\nBefore: [1, 3, 2, 3]\n2 0 2 3\nAfter:  [1, 3, 2, 0]\n\nBefore: [1, 0, 0, 0]\n15 0 2 2\nAfter:  [1, 0, 0, 0]\n\nBefore: [1, 3, 2, 1]\n1 1 2 3\nAfter:  [1, 3, 2, 2]\n\nBefore: [3, 2, 2, 3]\n5 3 1 1\nAfter:  [3, 2, 2, 3]\n\nBefore: [2, 1, 2, 1]\n0 1 2 2\nAfter:  [2, 1, 0, 1]\n\nBefore: [2, 2, 1, 3]\n9 1 1 1\nAfter:  [2, 4, 1, 3]\n\nBefore: [1, 2, 2, 0]\n9 2 1 2\nAfter:  [1, 2, 4, 0]\n\nBefore: [3, 1, 2, 3]\n0 1 2 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [1, 2, 2, 1]\n2 0 2 3\nAfter:  [1, 2, 2, 0]\n\nBefore: [0, 2, 2, 1]\n9 1 1 2\nAfter:  [0, 2, 4, 1]\n\nBefore: [2, 2, 2, 2]\n9 2 3 1\nAfter:  [2, 4, 2, 2]\n\nBefore: [2, 2, 2, 0]\n3 2 2 0\nAfter:  [2, 2, 2, 0]\n\nBefore: [1, 1, 3, 1]\n11 1 0 2\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 0, 3, 1]\n9 0 0 1\nAfter:  [2, 4, 3, 1]\n\nBefore: [1, 0, 2, 0]\n2 0 2 0\nAfter:  [0, 0, 2, 0]\n\nBefore: [2, 3, 0, 3]\n10 2 2 0\nAfter:  [1, 3, 0, 3]\n\nBefore: [3, 1, 3, 2]\n13 2 1 1\nAfter:  [3, 1, 3, 2]\n\nBefore: [3, 2, 0, 2]\n10 3 3 1\nAfter:  [3, 1, 0, 2]\n\nBefore: [3, 1, 1, 2]\n14 3 2 1\nAfter:  [3, 0, 1, 2]\n\nBefore: [0, 1, 2, 1]\n3 2 2 2\nAfter:  [0, 1, 2, 1]\n\nBefore: [0, 1, 2, 1]\n7 0 0 3\nAfter:  [0, 1, 2, 0]\n\nBefore: [1, 1, 1, 2]\n11 1 0 3\nAfter:  [1, 1, 1, 1]\n\nBefore: [3, 2, 2, 3]\n5 3 1 2\nAfter:  [3, 2, 2, 3]\n\nBefore: [3, 0, 2, 3]\n1 0 2 0\nAfter:  [2, 0, 2, 3]\n\nBefore: [1, 1, 2, 2]\n0 1 2 2\nAfter:  [1, 1, 0, 2]\n\nBefore: [1, 1, 0, 3]\n11 1 0 1\nAfter:  [1, 1, 0, 3]\n\nBefore: [3, 1, 2, 0]\n0 1 2 1\nAfter:  [3, 0, 2, 0]\n\nBefore: [1, 1, 0, 1]\n11 1 0 1\nAfter:  [1, 1, 0, 1]\n\nBefore: [2, 3, 2, 1]\n12 3 2 1\nAfter:  [2, 1, 2, 1]\n\nBefore: [0, 1, 3, 1]\n4 3 2 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 3, 2, 0]\n2 0 2 1\nAfter:  [1, 0, 2, 0]\n\nBefore: [0, 1, 3, 3]\n7 0 0 2\nAfter:  [0, 1, 0, 3]\n\nBefore: [3, 1, 3, 1]\n6 1 3 2\nAfter:  [3, 1, 1, 1]\n\nBefore: [1, 2, 3, 1]\n4 3 2 0\nAfter:  [1, 2, 3, 1]\n\nBefore: [3, 2, 2, 3]\n3 3 3 1\nAfter:  [3, 3, 2, 3]\n\nBefore: [2, 1, 2, 1]\n6 1 3 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 1, 2, 3]\n11 1 0 3\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 0, 1, 3]\n7 0 0 0\nAfter:  [0, 0, 1, 3]\n\nBefore: [2, 2, 1, 2]\n9 3 3 0\nAfter:  [4, 2, 1, 2]\n\nBefore: [0, 2, 1, 3]\n7 0 0 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [1, 1, 1, 0]\n11 1 0 0\nAfter:  [1, 1, 1, 0]\n\nBefore: [0, 1, 2, 1]\n6 1 3 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [0, 3, 3, 2]\n7 0 0 0\nAfter:  [0, 3, 3, 2]\n\nBefore: [3, 1, 2, 2]\n0 1 2 3\nAfter:  [3, 1, 2, 0]\n\nBefore: [3, 1, 2, 0]\n0 1 2 3\nAfter:  [3, 1, 2, 0]\n\nBefore: [3, 1, 2, 0]\n3 2 2 3\nAfter:  [3, 1, 2, 2]\n\nBefore: [2, 2, 1, 3]\n8 1 3 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [1, 2, 1, 3]\n9 2 0 3\nAfter:  [1, 2, 1, 2]\n\nBefore: [3, 2, 2, 1]\n12 3 2 0\nAfter:  [1, 2, 2, 1]\n\nBefore: [2, 3, 2, 3]\n8 0 3 1\nAfter:  [2, 2, 2, 3]\n\nBefore: [1, 1, 1, 3]\n13 3 1 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [0, 0, 2, 1]\n12 3 2 3\nAfter:  [0, 0, 2, 1]\n\nBefore: [1, 0, 0, 2]\n10 3 3 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [3, 2, 3, 1]\n4 3 2 1\nAfter:  [3, 1, 3, 1]\n\nBefore: [3, 3, 2, 1]\n1 1 2 2\nAfter:  [3, 3, 2, 1]\n\nBefore: [3, 2, 2, 3]\n5 0 1 2\nAfter:  [3, 2, 2, 3]\n\nBefore: [1, 1, 0, 0]\n15 0 2 0\nAfter:  [0, 1, 0, 0]\n\nBefore: [2, 3, 3, 2]\n9 3 0 3\nAfter:  [2, 3, 3, 4]\n\nBefore: [2, 3, 2, 1]\n12 3 2 0\nAfter:  [1, 3, 2, 1]\n\nBefore: [0, 1, 1, 3]\n3 3 3 0\nAfter:  [3, 1, 1, 3]\n\nBefore: [1, 1, 0, 0]\n15 0 2 2\nAfter:  [1, 1, 0, 0]\n\nBefore: [2, 3, 2, 1]\n5 1 0 1\nAfter:  [2, 2, 2, 1]\n\nBefore: [2, 1, 1, 1]\n6 1 3 1\nAfter:  [2, 1, 1, 1]\n\nBefore: [3, 1, 2, 1]\n1 0 2 0\nAfter:  [2, 1, 2, 1]\n\nBefore: [2, 0, 1, 2]\n9 3 0 3\nAfter:  [2, 0, 1, 4]\n\nBefore: [2, 1, 1, 1]\n6 1 3 2\nAfter:  [2, 1, 1, 1]\n\nBefore: [1, 1, 2, 2]\n0 1 2 0\nAfter:  [0, 1, 2, 2]\n\nBefore: [2, 3, 1, 3]\n14 3 1 0\nAfter:  [1, 3, 1, 3]\n\nBefore: [3, 3, 3, 2]\n5 0 3 0\nAfter:  [2, 3, 3, 2]\n\nBefore: [3, 3, 2, 3]\n3 2 2 1\nAfter:  [3, 2, 2, 3]\n\nBefore: [1, 2, 3, 3]\n13 1 2 1\nAfter:  [1, 0, 3, 3]\n\nBefore: [2, 1, 0, 3]\n13 3 1 2\nAfter:  [2, 1, 1, 3]\n\nBefore: [0, 0, 3, 1]\n4 3 2 3\nAfter:  [0, 0, 3, 1]\n\nBefore: [0, 2, 3, 1]\n4 3 2 0\nAfter:  [1, 2, 3, 1]\n\nBefore: [0, 1, 3, 2]\n7 0 0 0\nAfter:  [0, 1, 3, 2]\n\nBefore: [1, 3, 2, 1]\n2 0 2 2\nAfter:  [1, 3, 0, 1]\n\nBefore: [1, 2, 0, 1]\n15 0 2 3\nAfter:  [1, 2, 0, 0]\n\nBefore: [2, 0, 2, 1]\n12 3 2 2\nAfter:  [2, 0, 1, 1]\n\nBefore: [2, 1, 1, 3]\n8 2 3 1\nAfter:  [2, 1, 1, 3]\n\nBefore: [2, 3, 2, 0]\n1 1 2 2\nAfter:  [2, 3, 2, 0]\n\nBefore: [1, 3, 2, 2]\n9 2 3 0\nAfter:  [4, 3, 2, 2]\n\nBefore: [3, 3, 1, 2]\n14 3 2 2\nAfter:  [3, 3, 0, 2]\n\nBefore: [0, 0, 2, 0]\n7 0 0 1\nAfter:  [0, 0, 2, 0]\n\nBefore: [2, 1, 2, 3]\n3 2 2 2\nAfter:  [2, 1, 2, 3]\n\nBefore: [3, 2, 1, 1]\n14 1 2 2\nAfter:  [3, 2, 0, 1]\n\nBefore: [1, 0, 2, 2]\n10 3 3 0\nAfter:  [1, 0, 2, 2]\n\nBefore: [2, 2, 3, 0]\n10 3 3 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [3, 2, 3, 0]\n10 3 3 0\nAfter:  [1, 2, 3, 0]\n\nBefore: [1, 1, 3, 1]\n6 1 3 3\nAfter:  [1, 1, 3, 1]\n\nBefore: [3, 3, 3, 1]\n4 3 2 0\nAfter:  [1, 3, 3, 1]\n\nBefore: [0, 3, 3, 3]\n14 3 1 2\nAfter:  [0, 3, 1, 3]\n\nBefore: [3, 2, 1, 2]\n4 2 3 0\nAfter:  [1, 2, 1, 2]\n\nBefore: [2, 1, 2, 1]\n9 2 0 3\nAfter:  [2, 1, 2, 4]\n\nBefore: [0, 1, 2, 3]\n7 0 0 1\nAfter:  [0, 0, 2, 3]\n\nBefore: [3, 0, 1, 2]\n4 2 3 3\nAfter:  [3, 0, 1, 1]\n\nBefore: [2, 2, 0, 3]\n8 0 3 2\nAfter:  [2, 2, 2, 3]\n\nBefore: [0, 1, 2, 1]\n12 3 2 0\nAfter:  [1, 1, 2, 1]\n\nBefore: [1, 1, 3, 3]\n11 1 0 1\nAfter:  [1, 1, 3, 3]\n\nBefore: [0, 1, 2, 2]\n3 2 2 1\nAfter:  [0, 2, 2, 2]\n\n\n\n7 2 0 0\n11 0 2 0\n2 1 1 3\n7 0 0 2\n11 2 2 2\n13 0 3 2\n7 2 1 2\n9 1 2 1\n8 1 0 2\n2 3 1 3\n2 3 1 1\n14 0 1 3\n7 3 2 3\n7 3 1 3\n9 3 2 2\n8 2 0 0\n7 1 0 2\n11 2 2 2\n2 0 2 1\n2 0 0 3\n2 3 1 2\n7 2 1 2\n9 0 2 0\n8 0 2 1\n2 2 3 0\n2 3 2 3\n2 3 2 2\n0 0 2 2\n7 2 1 2\n7 2 2 2\n9 1 2 1\n8 1 3 0\n2 2 1 3\n2 1 2 1\n2 2 3 2\n15 1 3 3\n7 3 3 3\n9 3 0 0\n8 0 3 2\n2 3 1 1\n2 2 0 3\n2 1 3 0\n15 0 3 0\n7 0 2 0\n7 0 3 0\n9 2 0 2\n8 2 2 3\n2 2 1 0\n2 3 2 2\n7 1 0 1\n11 1 1 1\n0 0 2 1\n7 1 2 1\n9 1 3 3\n8 3 2 1\n7 1 0 3\n11 3 1 3\n13 0 3 3\n7 3 3 3\n9 1 3 1\n8 1 1 3\n7 0 0 2\n11 2 2 2\n2 3 1 0\n2 0 3 1\n14 2 0 0\n7 0 1 0\n9 0 3 3\n8 3 2 1\n2 1 2 0\n2 2 2 3\n2 0 2 2\n7 0 2 3\n7 3 3 3\n9 3 1 1\n8 1 1 0\n2 0 2 1\n7 1 0 3\n11 3 1 3\n11 3 1 1\n7 1 3 1\n9 1 0 0\n8 0 3 2\n2 1 2 0\n7 3 0 1\n11 1 0 1\n2 2 1 3\n11 0 1 1\n7 1 1 1\n7 1 1 1\n9 1 2 2\n7 1 0 0\n11 0 3 0\n2 1 3 1\n15 1 3 3\n7 3 1 3\n9 2 3 2\n8 2 3 3\n2 0 3 2\n1 0 2 2\n7 2 2 2\n7 2 2 2\n9 2 3 3\n2 2 3 0\n2 3 0 2\n2 2 2 1\n0 0 2 2\n7 2 2 2\n9 3 2 3\n7 3 0 0\n11 0 3 0\n7 2 0 2\n11 2 0 2\n0 2 0 0\n7 0 2 0\n9 3 0 3\n2 3 2 0\n2 3 3 1\n0 2 0 1\n7 1 2 1\n9 1 3 3\n8 3 3 1\n2 3 3 2\n2 3 0 3\n1 3 2 3\n7 3 3 3\n9 3 1 1\n2 1 3 3\n2 0 1 2\n9 3 3 2\n7 2 1 2\n9 2 1 1\n8 1 3 0\n7 2 0 3\n11 3 0 3\n7 1 0 2\n11 2 2 2\n2 2 1 1\n12 3 2 3\n7 3 3 3\n9 3 0 0\n8 0 2 2\n2 0 3 1\n7 1 0 0\n11 0 1 0\n2 1 1 3\n11 3 1 1\n7 1 3 1\n9 2 1 2\n7 0 0 0\n11 0 2 0\n2 3 2 1\n13 0 3 0\n7 0 2 0\n7 0 1 0\n9 2 0 2\n8 2 0 0\n2 1 2 1\n7 0 0 2\n11 2 2 2\n9 1 3 1\n7 1 2 1\n9 1 0 0\n8 0 1 1\n2 1 0 2\n2 2 2 3\n2 2 1 0\n10 0 3 2\n7 2 3 2\n7 2 1 2\n9 1 2 1\n8 1 3 2\n2 3 1 1\n2 3 2 3\n5 1 0 3\n7 3 3 3\n7 3 1 3\n9 2 3 2\n2 2 1 1\n2 2 0 3\n10 0 3 0\n7 0 3 0\n9 2 0 2\n8 2 3 0\n2 0 3 1\n2 2 0 2\n7 1 0 3\n11 3 0 3\n12 3 2 1\n7 1 2 1\n9 0 1 0\n8 0 3 1\n2 3 0 2\n2 2 2 0\n2 2 3 3\n6 0 2 3\n7 3 2 3\n9 3 1 1\n8 1 3 0\n2 3 1 3\n2 0 1 1\n1 3 2 1\n7 1 1 1\n9 1 0 0\n7 0 0 3\n11 3 0 3\n2 0 3 2\n2 3 2 1\n1 1 2 2\n7 2 1 2\n7 2 3 2\n9 2 0 0\n2 2 0 3\n2 0 0 1\n2 0 3 2\n4 2 3 3\n7 3 1 3\n9 3 0 0\n8 0 1 1\n2 2 3 2\n2 1 3 0\n2 0 1 3\n12 3 2 3\n7 3 3 3\n9 1 3 1\n8 1 3 3\n2 3 2 1\n2 3 1 0\n6 2 0 2\n7 2 3 2\n7 2 1 2\n9 3 2 3\n8 3 2 2\n2 1 3 3\n2 1 3 0\n9 0 0 1\n7 1 2 1\n7 1 3 1\n9 1 2 2\n2 2 2 0\n2 1 0 1\n2 0 0 3\n15 1 0 3\n7 3 3 3\n9 3 2 2\n8 2 1 1\n2 0 2 0\n7 0 0 3\n11 3 2 3\n7 0 0 2\n11 2 2 2\n2 3 2 2\n7 2 3 2\n9 1 2 1\n2 2 0 2\n7 2 0 3\n11 3 0 3\n2 3 2 0\n12 3 2 2\n7 2 3 2\n9 2 1 1\n8 1 0 0\n2 2 1 2\n7 3 0 1\n11 1 2 1\n12 3 2 1\n7 1 2 1\n7 1 1 1\n9 0 1 0\n8 0 0 1\n2 0 2 0\n12 3 2 2\n7 2 3 2\n7 2 3 2\n9 1 2 1\n2 1 1 2\n7 0 0 3\n11 3 2 3\n2 3 2 0\n1 0 2 3\n7 3 2 3\n9 1 3 1\n8 1 1 3\n2 3 2 2\n2 2 0 0\n2 3 1 1\n14 0 1 2\n7 2 3 2\n9 3 2 3\n8 3 0 1\n7 0 0 3\n11 3 0 3\n2 1 3 0\n7 3 0 2\n11 2 3 2\n4 3 2 0\n7 0 3 0\n9 0 1 1\n8 1 1 0\n2 2 2 3\n2 3 3 1\n1 1 2 2\n7 2 1 2\n9 2 0 0\n8 0 0 1\n2 3 1 2\n2 1 0 3\n2 3 1 0\n7 3 2 2\n7 2 1 2\n7 2 1 2\n9 2 1 1\n8 1 1 3\n2 1 3 0\n2 2 1 2\n2 2 2 1\n8 0 2 0\n7 0 2 0\n9 3 0 3\n8 3 1 0\n2 2 2 3\n2 1 2 1\n15 1 3 2\n7 2 2 2\n9 0 2 0\n2 3 1 2\n2 3 1 1\n5 1 3 1\n7 1 3 1\n9 0 1 0\n8 0 3 1\n2 0 3 2\n2 2 2 0\n10 0 3 3\n7 3 1 3\n7 3 1 3\n9 3 1 1\n8 1 3 0\n7 3 0 3\n11 3 0 3\n2 1 1 1\n2 2 2 2\n12 3 2 1\n7 1 1 1\n9 1 0 0\n8 0 3 2\n2 1 0 0\n2 3 1 3\n2 3 3 1\n9 0 0 0\n7 0 1 0\n9 0 2 2\n8 2 2 3\n2 2 0 1\n2 3 3 2\n2 2 2 0\n6 1 2 1\n7 1 3 1\n9 1 3 3\n2 1 3 0\n2 1 3 1\n7 1 2 2\n7 2 2 2\n9 3 2 3\n8 3 3 0\n2 0 2 3\n2 2 1 2\n3 2 3 2\n7 2 3 2\n7 2 2 2\n9 2 0 0\n8 0 3 1\n2 1 3 2\n7 3 0 3\n11 3 2 3\n2 2 0 0\n10 0 3 3\n7 3 3 3\n9 3 1 1\n8 1 1 3\n2 2 0 1\n7 0 0 2\n11 2 3 2\n2 1 1 0\n6 1 2 2\n7 2 1 2\n7 2 2 2\n9 2 3 3\n7 1 0 2\n11 2 0 2\n2 1 2 1\n7 0 2 2\n7 2 3 2\n9 2 3 3\n8 3 0 2\n2 1 1 3\n9 3 0 1\n7 1 3 1\n9 1 2 2\n2 2 2 3\n2 2 0 1\n7 1 0 0\n11 0 2 0\n3 1 3 1\n7 1 2 1\n7 1 1 1\n9 1 2 2\n8 2 2 0\n7 3 0 2\n11 2 2 2\n2 0 3 3\n2 3 2 1\n12 3 2 1\n7 1 1 1\n9 1 0 0\n8 0 2 3\n2 2 1 0\n2 3 0 2\n2 3 0 1\n2 2 1 0\n7 0 1 0\n9 3 0 3\n8 3 0 1\n7 1 0 2\n11 2 2 2\n2 0 2 0\n2 0 0 3\n12 3 2 3\n7 3 3 3\n9 3 1 1\n8 1 0 3\n2 1 1 0\n2 0 2 1\n8 0 2 0\n7 0 2 0\n9 0 3 3\n2 2 0 0\n2 1 2 1\n2 1 1 2\n15 1 0 2\n7 2 3 2\n9 2 3 3\n8 3 0 0\n7 0 0 1\n11 1 3 1\n2 3 2 3\n7 0 0 2\n11 2 1 2\n1 3 2 3\n7 3 3 3\n7 3 1 3\n9 0 3 0\n8 0 3 2\n2 0 2 1\n2 1 2 0\n7 3 0 3\n11 3 1 3\n11 0 1 1\n7 1 2 1\n9 1 2 2\n8 2 3 3\n2 3 3 1\n7 0 0 0\n11 0 0 0\n2 0 3 2\n2 2 1 1\n7 1 3 1\n9 1 3 3\n7 2 0 1\n11 1 3 1\n2 1 2 2\n1 1 2 2\n7 2 3 2\n9 2 3 3\n8 3 1 1\n7 3 0 0\n11 0 3 0\n2 2 3 2\n2 2 0 3\n3 2 3 2\n7 2 1 2\n9 1 2 1\n8 1 3 3\n2 2 2 0\n2 2 3 1\n2 3 2 2\n6 0 2 1\n7 1 3 1\n7 1 2 1\n9 3 1 3\n8 3 0 1\n2 3 3 3\n2 0 1 2\n2 0 1 0\n1 3 2 0\n7 0 1 0\n9 1 0 1\n7 0 0 0\n11 0 0 0\n2 1 2 3\n2 2 3 0\n7 0 2 0\n9 1 0 1\n2 2 0 0\n2 2 0 3\n2 1 2 2\n2 3 0 0\n7 0 2 0\n7 0 2 0\n9 0 1 1\n8 1 0 0\n2 1 2 3\n7 1 0 1\n11 1 1 1\n2 0 1 2\n9 3 3 1\n7 1 3 1\n7 1 3 1\n9 0 1 0\n7 2 0 2\n11 2 1 2\n7 2 0 1\n11 1 1 1\n7 0 0 3\n11 3 0 3\n2 3 1 3\n7 3 3 3\n9 3 0 0\n8 0 3 1\n2 0 0 3\n2 3 2 0\n2 3 2 2\n4 3 2 2\n7 2 1 2\n9 2 1 1\n8 1 0 3\n2 0 0 2\n7 3 0 1\n11 1 2 1\n7 3 0 0\n11 0 1 0\n7 0 2 0\n7 0 2 0\n9 0 3 3\n2 3 1 2\n2 2 3 0\n6 1 2 0\n7 0 1 0\n7 0 3 0\n9 0 3 3\n2 0 2 1\n2 1 1 0\n7 3 0 2\n11 2 2 2\n11 0 1 2\n7 2 3 2\n9 3 2 3\n8 3 2 1\n2 0 3 2\n2 2 0 3\n15 0 3 3\n7 3 3 3\n7 3 3 3\n9 1 3 1\n2 2 1 2\n2 0 1 3\n2 0 2 0\n3 2 3 0\n7 0 2 0\n9 0 1 1\n2 2 1 0\n7 2 0 2\n11 2 0 2\n2 1 2 3\n13 0 3 0\n7 0 2 0\n7 0 1 0\n9 1 0 1\n2 2 2 0\n2 3 3 2\n6 0 2 0\n7 0 2 0\n9 0 1 1\n8 1 3 3\n2 2 2 1\n2 0 3 2\n2 1 2 0\n7 0 2 1\n7 1 3 1\n9 3 1 3\n8 3 3 2\n2 3 3 3\n7 3 0 0\n11 0 3 0\n2 2 0 1\n6 1 0 3\n7 3 1 3\n9 3 2 2\n8 2 3 1\n2 2 2 3\n2 2 2 2\n2 1 2 0\n15 0 3 0\n7 0 1 0\n9 1 0 1\n8 1 1 2\n2 1 0 1\n2 1 0 3\n2 2 3 0\n15 3 0 0\n7 0 2 0\n9 2 0 2\n8 2 3 0\n2 2 0 3\n2 0 1 2\n7 1 2 2\n7 2 1 2\n9 2 0 0\n8 0 0 1\n2 3 2 2\n7 1 0 0\n11 0 1 0\n7 0 2 0\n7 0 3 0\n9 1 0 1\n8 1 2 0\n7 3 0 3\n11 3 0 3\n2 3 3 1\n4 3 2 1\n7 1 3 1\n9 0 1 0\n2 1 3 3\n2 0 3 2\n2 1 1 1\n9 1 3 3\n7 3 2 3\n9 3 0 0\n8 0 2 2\n2 2 1 0\n7 2 0 1\n11 1 3 1\n2 2 1 3\n14 0 1 3\n7 3 2 3\n7 3 2 3\n9 3 2 2\n8 2 0 1\n2 3 2 3\n2 3 2 2\n5 3 0 2\n7 2 3 2\n7 2 3 2\n9 1 2 1\n7 0 0 0\n11 0 1 0\n2 2 1 2\n7 3 0 3\n11 3 2 3\n3 2 3 2\n7 2 3 2\n9 2 1 1\n8 1 1 2\n2 1 1 3\n2 0 0 1\n9 3 0 1\n7 1 3 1\n9 1 2 2\n8 2 0 1\n2 2 3 2\n7 0 0 3\n11 3 2 3\n3 2 3 0\n7 0 3 0\n9 1 0 1\n2 0 1 3\n2 2 0 0\n3 2 3 0\n7 0 1 0\n9 0 1 1\n8 1 3 0\n2 3 3 2\n2 2 0 1\n2 3 3 3\n6 1 2 3\n7 3 3 3\n9 0 3 0\n8 0 0 1\n2 0 0 3\n2 0 3 0\n4 3 2 3\n7 3 3 3\n7 3 1 3\n9 1 3 1\n8 1 2 3\n2 2 1 1\n2 3 3 0\n6 1 2 2\n7 2 3 2\n9 2 3 3\n2 2 0 2\n7 1 0 0\n11 0 1 0\n2 1 0 1\n9 1 0 1\n7 1 2 1\n7 1 1 1\n9 1 3 3\n8 3 3 2\n2 1 3 3\n2 1 3 1\n7 3 0 0\n11 0 3 0\n2 3 1 0\n7 0 1 0\n9 0 2 2\n8 2 0 1\n7 3 0 0\n11 0 2 0\n2 1 2 2\n13 0 3 0\n7 0 2 0\n7 0 1 0\n9 1 0 1\n8 1 0 0\n7 1 0 1\n11 1 1 1\n2 0 0 3\n2 2 1 2\n12 3 2 2\n7 2 3 2\n9 0 2 0\n8 0 0 1\n2 3 1 2\n2 3 1 3\n2 1 2 0\n9 0 0 0\n7 0 3 0\n9 1 0 1\n2 1 0 3\n2 2 1 0\n2 2 3 2\n13 0 3 3\n7 3 1 3\n7 3 2 3\n9 1 3 1\n8 1 0 3\n2 0 2 1\n2 3 1 2\n0 0 2 0\n7 0 3 0\n7 0 2 0\n9 0 3 3\n8 3 0 2\n2 1 0 3\n2 0 0 0\n2 1 3 1\n2 3 1 1\n7 1 1 1\n9 2 1 2\n8 2 0 0\n2 3 1 2\n7 2 0 1\n11 1 1 1\n7 3 2 1\n7 1 1 1\n9 1 0 0\n8 0 1 2\n7 1 0 1\n11 1 3 1\n2 2 3 0\n2 0 1 3\n2 3 0 0\n7 0 1 0\n9 0 2 2\n8 2 2 1\n2 1 2 0\n7 2 0 3\n11 3 1 3\n2 1 1 2\n9 3 0 3\n7 3 3 3\n7 3 1 3\n9 1 3 1\n7 3 0 3\n11 3 0 3\n2 0 0 2\n2 3 3 0\n0 2 0 2\n7 2 2 2\n7 2 3 2\n9 1 2 1\n8 1 3 0\n2 3 3 2\n2 0 0 1\n7 2 0 3\n11 3 1 3\n11 3 1 1\n7 1 3 1\n7 1 3 1\n9 1 0 0\n7 2 0 3\n11 3 2 3\n2 3 0 1\n7 2 0 2\n11 2 2 2\n14 2 1 1\n7 1 1 1\n9 1 0 0\n8 0 2 1\n7 0 0 0\n11 0 2 0\n2 3 3 2\n2 1 2 3\n7 3 2 2\n7 2 2 2\n9 2 1 1\n8 1 0 0\n2 1 3 1\n2 3 3 2\n2 2 3 3\n15 1 3 1\n7 1 3 1\n9 0 1 0\n8 0 1 1\n2 0 1 2\n2 2 0 0\n10 0 3 2\n7 2 2 2\n9 2 1 1\n8 1 1 2\n7 2 0 0\n11 0 3 0\n2 0 2 3\n7 1 0 1\n11 1 2 1\n6 1 0 3\n7 3 2 3\n9 2 3 2\n2 1 3 0\n2 1 1 1\n7 2 0 3\n11 3 2 3\n15 1 3 3\n7 3 3 3\n7 3 1 3\n9 3 2 2\n8 2 2 3\n7 2 0 2\n11 2 0 2\n2 0 3 1\n7 0 2 2\n7 2 1 2\n9 2 3 3\n8 3 1 2\n7 3 0 0\n11 0 2 0\n2 0 1 3\n3 0 3 1\n7 1 1 1\n9 2 1 2\n8 2 0 1\n2 1 2 3\n2 2 2 2\n13 0 3 0\n7 0 2 0\n9 1 0 1\n2 0 0 2\n2 3 3 0\n2 2 2 3\n4 2 3 3\n7 3 1 3\n9 3 1 1\n8 1 2 2\n2 0 3 1\n2 1 0 0\n2 0 2 3\n11 0 1 1\n7 1 2 1\n9 2 1 2\n8 2 2 1\n7 1 0 2\n11 2 0 2\n2 2 3 3\n4 2 3 0\n7 0 3 0\n9 0 1 1\n8 1 2 0\n7 3 0 1\n11 1 3 1\n7 0 0 3\n11 3 1 3\n11 3 1 2\n7 2 2 2\n7 2 3 2\n9 2 0 0\n8 0 2 1\n2 1 0 0\n7 3 0 2\n11 2 2 2\n2 0 1 3\n8 0 2 0\n7 0 3 0\n9 0 1 1\n8 1 0 0\n7 2 0 1\n11 1 2 1\n12 3 2 2\n7 2 3 2\n9 0 2 0\n7 2 0 1\n11 1 1 1\n2 3 1 2\n2 2 1 3\n7 1 2 2\n7 2 3 2\n7 2 2 2\n9 0 2 0\n2 0 2 3\n2 2 3 1\n2 3 2 2\n4 3 2 3\n7 3 3 3\n7 3 1 3\n9 0 3 0\n8 0 1 1\n2 0 1 2\n2 3 1 3\n2 2 3 0\n5 3 0 3\n7 3 3 3\n9 3 1 1\n8 1 3 3\n2 1 3 0\n2 1 3 1\n7 1 0 2\n11 2 2 2\n8 0 2 2\n7 2 3 2\n9 3 2 3\n8 3 1 1\n2 1 2 3\n2 3 0 2\n9 3 0 3\n7 3 2 3\n9 3 1 1\n2 0 3 3\n2 2 2 0\n6 0 2 0\n7 0 2 0\n9 1 0 1\n2 3 3 0\n2 2 3 3\n7 3 1 3\n9 1 3 1\n8 1 0 0")

(defn parse-input [input]
  (as-> input $
        (str/split $ #"\n\n\n\n")
        (first $)
        (str/split $ #"\n\n")
        (map (fn [operation] (re-matches #"Before: \[(\d+), (\d+), (\d+), (\d+)\]\n(\d+) (\d+) (\d+) (\d+)\nAfter:  \[(\d+), (\d+), (\d+), (\d+)\]"
                                         operation))
             $)
        (map (partial drop 1)
             $)
        (map (partial map read-string)
             $)
        (map (partial partition 4)
             $)
        (map (partial map vec)
             $)))

(defn a [op]
  (nth op 1))
(defn b [op]
  (nth op 2))
(defn c [op]
  (nth op 3))

(defn reg-a [op reg]
  (nth reg (a op)))
(defn reg-b [op reg]
  (nth reg (b op)))
(defn reg-c [op reg]
  (nth reg (c op)))

(defn addr [reg op]
  (assoc reg (c op) (+ (reg-a op reg) (reg-b op reg))))

(defn addi [reg op]
  (assoc reg (c op) (+ (reg-a op reg) (b op))))


(defn mulr [reg op]
  (assoc reg (c op) (* (reg-a op reg) (reg-b op reg))))

(defn muli [reg op]
  (assoc reg (c op) (* (reg-a op reg) (b op))))


(defn banr [reg op]
  (assoc reg (c op) (bit-and (reg-a op reg) (reg-b op reg))))

(defn bani [reg op]
  (assoc reg (c op) (bit-and (reg-a op reg) (b op))))


(defn borr [reg op]
  (assoc reg (c op) (bit-or (reg-a op reg) (reg-b op reg))))

(defn bori [reg op]
  (assoc reg (c op) (bit-or (reg-a op reg) (b op))))


(defn setr [reg op]
  (assoc reg (c op) (reg-a op reg)))

(defn seti [reg op]
  (assoc reg (c op) (a op)))


(defn gtir [reg op]
  (assoc reg (c op) (if (> (a op) (reg-b op reg)) 1 0)))

(defn gtri [reg op]
  (assoc reg (c op) (if (> (reg-a op reg) (b op)) 1 0)))

(defn gtrr [reg op]
  (assoc reg (c op) (if (> (reg-a op reg) (reg-b op reg)) 1 0)))


(defn eqir [reg op]
  (assoc reg (c op) (if (= (a op) (reg-b op reg)) 1 0)))

(defn eqri [reg op]
  (assoc reg (c op) (if (= (reg-a op reg) (b op)) 1 0)))

(defn eqrr [reg op]
  (assoc reg (c op) (if (= (reg-a op reg) (reg-b op reg)) 1 0)))

(def all-ops [addr
              addi
              mulr
              muli
              banr
              bani
              borr
              bori
              setr
              seti
              gtir
              gtri
              gtrr
              eqir
              eqri
              eqrr])

(def sample [[1 1 3 3] [11 1 0 1] [1 1 3 3]])

(defn matches-op [sample op]
  (= (apply op (take 2 sample)) (last sample)))

(defn ops-matched
  {:test (fn [] (is= (ops-matched (first (parse-input "Before: [3, 2, 1, 1]\n9 2 1 2\nAfter:  [3, 2, 2, 1]")))
                     [addi mulr seti]))}
  [sample]
  (->> all-ops
       (filter (partial matches-op sample))))

(defn behaves-like-three-ops [sample]
  (<= 3 (count (ops-matched sample))))


(defn part1 [input]
  (->> input
       (parse-input)
       (filter behaves-like-three-ops)
       (count)))

(defn spy [x] (clojure.pprint/pprint x) x)

(defn initial-possible-ops-for-op-number [samples op-number]
  (let [samples-for-op-number (->> samples
                                   (filter (fn [[_ op _]] (= op-number (first op)))))
        ops-matching-all-samples (filter (fn [op] (every? (fn [sample]
                                                            (matches-op sample op))
                                                          samples-for-op-number))
                                         all-ops)]
    (into #{} ops-matching-all-samples)))

(defn deduce-ops [samples]
  (loop [possible-ops-for-op-number
         (->> (range 0 16)
              (map (fn [op-number]
                     [op-number (initial-possible-ops-for-op-number samples op-number)])))
         determined-ops []]
    (println (map (comp count second) possible-ops-for-op-number))
    (if (not (empty? possible-ops-for-op-number))
      (let [newly-determined-op (reduce (fn [_ [op-number ops]]
                                          (when (= 1 (count ops))
                                            (reduced [op-number (first ops)])))
                                        nil
                                        possible-ops-for-op-number)]
        (recur (->> possible-ops-for-op-number
                    (map (fn [[op-number ops]]
                           [op-number (disj ops (second newly-determined-op))]))
                    (remove (fn [[_ ops]] (empty? ops))))
               (conj determined-ops newly-determined-op)))
      determined-ops)))

(defn get-program [input]
  (as-> input $
      (str/split $ #"\n\n\n\n")
      (second $)
      (str/split-lines $)
      (map (fn [line]
             (vec
               (map read-string
                    (str/split line #" "))))
           $)))

(defn execute-program [ops-map program]
  (reduce (fn [register op-digits]
            (let [op (get ops-map (first op-digits))]
              (op register op-digits)))
          [0 0 0 0]
          program))

(defn part2
  {:test (fn [] (part2 input))}
  [input]
  (let [samples (-> input
                    (parse-input))
        ops-map (spy (->> (deduce-ops samples)
                          (into {})))]
    (->> (get-program input)
         (execute-program ops-map))))




